<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Ajax - day03 | 前端笔记</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="在线笔记">
    
    <link rel="preload" href="/assets/css/0.styles.b4c82722.css" as="style"><link rel="preload" href="/assets/js/app.e7ac4fdd.js" as="script"><link rel="preload" href="/assets/js/2.5013479a.js" as="script"><link rel="preload" href="/assets/js/19.d8c2755b.js" as="script"><link rel="prefetch" href="/assets/js/10.e05b3687.js"><link rel="prefetch" href="/assets/js/11.77bcc942.js"><link rel="prefetch" href="/assets/js/12.d4cee816.js"><link rel="prefetch" href="/assets/js/13.695b6e01.js"><link rel="prefetch" href="/assets/js/14.054e91c7.js"><link rel="prefetch" href="/assets/js/15.64b52713.js"><link rel="prefetch" href="/assets/js/16.88cc1d9d.js"><link rel="prefetch" href="/assets/js/17.685c7f62.js"><link rel="prefetch" href="/assets/js/18.4c866b21.js"><link rel="prefetch" href="/assets/js/20.627cc844.js"><link rel="prefetch" href="/assets/js/21.fd08fc3e.js"><link rel="prefetch" href="/assets/js/22.940fa810.js"><link rel="prefetch" href="/assets/js/23.3a4eab6c.js"><link rel="prefetch" href="/assets/js/24.69b8444e.js"><link rel="prefetch" href="/assets/js/25.1aecb394.js"><link rel="prefetch" href="/assets/js/26.b46213ba.js"><link rel="prefetch" href="/assets/js/27.e6a54228.js"><link rel="prefetch" href="/assets/js/28.9862105f.js"><link rel="prefetch" href="/assets/js/29.8795c4a3.js"><link rel="prefetch" href="/assets/js/3.9386a395.js"><link rel="prefetch" href="/assets/js/30.f787c60b.js"><link rel="prefetch" href="/assets/js/31.04108a8c.js"><link rel="prefetch" href="/assets/js/32.45e51a05.js"><link rel="prefetch" href="/assets/js/33.8db49f66.js"><link rel="prefetch" href="/assets/js/34.3e9b91f2.js"><link rel="prefetch" href="/assets/js/35.4b0712fb.js"><link rel="prefetch" href="/assets/js/36.e38e909a.js"><link rel="prefetch" href="/assets/js/37.353c78b2.js"><link rel="prefetch" href="/assets/js/38.606d7188.js"><link rel="prefetch" href="/assets/js/39.44e0e36d.js"><link rel="prefetch" href="/assets/js/4.b58620dd.js"><link rel="prefetch" href="/assets/js/40.02e63798.js"><link rel="prefetch" href="/assets/js/41.79caf09d.js"><link rel="prefetch" href="/assets/js/42.314c72fc.js"><link rel="prefetch" href="/assets/js/43.9e2ff031.js"><link rel="prefetch" href="/assets/js/44.0cef4bb9.js"><link rel="prefetch" href="/assets/js/45.1d6b5fcd.js"><link rel="prefetch" href="/assets/js/46.b96f3f3d.js"><link rel="prefetch" href="/assets/js/47.124a94d3.js"><link rel="prefetch" href="/assets/js/48.5522be19.js"><link rel="prefetch" href="/assets/js/49.88610c03.js"><link rel="prefetch" href="/assets/js/5.f8c621de.js"><link rel="prefetch" href="/assets/js/50.48572f7f.js"><link rel="prefetch" href="/assets/js/51.e249fc66.js"><link rel="prefetch" href="/assets/js/52.2d52565f.js"><link rel="prefetch" href="/assets/js/53.3990b1ef.js"><link rel="prefetch" href="/assets/js/54.b9ddf1bf.js"><link rel="prefetch" href="/assets/js/55.7df4faa1.js"><link rel="prefetch" href="/assets/js/56.36a9fef1.js"><link rel="prefetch" href="/assets/js/57.07c62e9b.js"><link rel="prefetch" href="/assets/js/58.ba7e0e60.js"><link rel="prefetch" href="/assets/js/59.21bc408c.js"><link rel="prefetch" href="/assets/js/6.7965e0cd.js"><link rel="prefetch" href="/assets/js/60.89e484fb.js"><link rel="prefetch" href="/assets/js/61.5da768e4.js"><link rel="prefetch" href="/assets/js/62.ac4f3bdc.js"><link rel="prefetch" href="/assets/js/63.8071db04.js"><link rel="prefetch" href="/assets/js/64.00ca93ad.js"><link rel="prefetch" href="/assets/js/65.dd327f9a.js"><link rel="prefetch" href="/assets/js/66.19bcd8b7.js"><link rel="prefetch" href="/assets/js/67.2c701616.js"><link rel="prefetch" href="/assets/js/7.9b470e3d.js"><link rel="prefetch" href="/assets/js/8.85b20668.js"><link rel="prefetch" href="/assets/js/9.6c0adfab.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b4c82722.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="./logo.png" alt="前端笔记" class="logo"> <span class="site-name can-hide">前端笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开班教程" class="dropdown-title"><span class="title">开班教程</span> <span class="arrow down"></span></button> <button type="button" aria-label="开班教程" class="mobile-dropdown-title"><span class="title">开班教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://fanyouf.gitee.io/u1word/#/h5" target="_blank" rel="noopener noreferrer" class="nav-link external">
  单词掌握
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发工具" class="dropdown-title"><span class="title">开发工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发工具" class="mobile-dropdown-title"><span class="title">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  VsCode
</a></li><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  MySql
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="课程笔记" class="dropdown-title"><span class="title">课程笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="课程笔记" class="mobile-dropdown-title"><span class="title">课程笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          课程笔记
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/study/AJAX/day01/01.html" class="nav-link">
  AJAX
</a></li><li class="dropdown-subitem"><a href="/study/BigEvent/day01/01.html" class="nav-link">
  BigEvent
</a></li><li class="dropdown-subitem"><a href="/study/Eacharts/day01/01.html" class="nav-link">
  Eacharts
</a></li><li class="dropdown-subitem"><a href="/study/Git/day01/01.html" class="nav-link">
  Git
</a></li><li class="dropdown-subitem"><a href="/study/JS基础/js-day01/01.html" class="nav-link">
  JS基础
</a></li><li class="dropdown-subitem"><a href="/study/Jquery/day01/01.html" class="nav-link">
  Jquery
</a></li><li class="dropdown-subitem"><a href="/study/Js高级/js高级day01/JavaScript高级第01天笔记.html" class="nav-link">
  Js高级
</a></li><li class="dropdown-subitem"><a href="/study/NodeJs/day01/01.html" class="nav-link">
  NodeJs
</a></li><li class="dropdown-subitem"><a href="/study/Vue基础/Day01/01.html" class="nav-link">
  Vue基础
</a></li><li class="dropdown-subitem"><a href="/study/webAPI/day01/01.html" class="nav-link">
  webAPI
</a></li><li class="dropdown-subitem"><a href="/study/黑马头条/day01/01-项目初始化.html" class="nav-link">
  黑马头条
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://www.apifox.cn/apidoc/shared-fa9274ac-362e-4905-806b-6135df6aa90e/doc-842135" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线Api接口
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="http://heima-project.gitee.io/fe-up/#/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  面试宝典
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开班教程" class="dropdown-title"><span class="title">开班教程</span> <span class="arrow down"></span></button> <button type="button" aria-label="开班教程" class="mobile-dropdown-title"><span class="title">开班教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://fanyouf.gitee.io/u1word/#/h5" target="_blank" rel="noopener noreferrer" class="nav-link external">
  单词掌握
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发工具" class="dropdown-title"><span class="title">开发工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发工具" class="mobile-dropdown-title"><span class="title">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  VsCode
</a></li><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  MySql
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="课程笔记" class="dropdown-title"><span class="title">课程笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="课程笔记" class="mobile-dropdown-title"><span class="title">课程笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          课程笔记
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/study/AJAX/day01/01.html" class="nav-link">
  AJAX
</a></li><li class="dropdown-subitem"><a href="/study/BigEvent/day01/01.html" class="nav-link">
  BigEvent
</a></li><li class="dropdown-subitem"><a href="/study/Eacharts/day01/01.html" class="nav-link">
  Eacharts
</a></li><li class="dropdown-subitem"><a href="/study/Git/day01/01.html" class="nav-link">
  Git
</a></li><li class="dropdown-subitem"><a href="/study/JS基础/js-day01/01.html" class="nav-link">
  JS基础
</a></li><li class="dropdown-subitem"><a href="/study/Jquery/day01/01.html" class="nav-link">
  Jquery
</a></li><li class="dropdown-subitem"><a href="/study/Js高级/js高级day01/JavaScript高级第01天笔记.html" class="nav-link">
  Js高级
</a></li><li class="dropdown-subitem"><a href="/study/NodeJs/day01/01.html" class="nav-link">
  NodeJs
</a></li><li class="dropdown-subitem"><a href="/study/Vue基础/Day01/01.html" class="nav-link">
  Vue基础
</a></li><li class="dropdown-subitem"><a href="/study/webAPI/day01/01.html" class="nav-link">
  webAPI
</a></li><li class="dropdown-subitem"><a href="/study/黑马头条/day01/01-项目初始化.html" class="nav-link">
  黑马头条
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://www.apifox.cn/apidoc/shared-fa9274ac-362e-4905-806b-6135df6aa90e/doc-842135" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线Api接口
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="http://heima-project.gitee.io/fe-up/#/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  面试宝典
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/study/AJAX/day01/01.html" class="sidebar-link">Ajax - day01</a></li><li><a href="/study/AJAX/day02/02.html" class="sidebar-link">Ajax - day02</a></li><li><a href="/study/AJAX/day03/03.html" aria-current="page" class="active sidebar-link">Ajax - day03</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#什么xmlhttprequest" class="sidebar-link">什么XMLHttpRequest</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#使用xhr发起-get-请求-⭐⭐⭐" class="sidebar-link">使用xhr发起 GET 请求（⭐⭐⭐）</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#了解xhr对象的readystate属性" class="sidebar-link">了解xhr对象的readyState属性</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#使用xhr发起带参数的-get-请求" class="sidebar-link">使用xhr发起带参数的 GET 请求</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#查询字符串" class="sidebar-link">查询字符串</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#什么是查询字符串" class="sidebar-link">什么是查询字符串</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#get-请求携带参数的本质" class="sidebar-link">GET 请求携带参数的本质</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#url-编码与解码" class="sidebar-link">URL 编码与解码</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#什么是-url-编码" class="sidebar-link">什么是 URL 编码</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#如何对-url-进行编码与解码" class="sidebar-link">如何对 URL 进行编码与解码</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#使用xhr发起post请求-⭐⭐⭐" class="sidebar-link">使用xhr发起POST请求（⭐⭐⭐）</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#什么是数据交换格式" class="sidebar-link">什么是数据交换格式</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#xml" class="sidebar-link">XML</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#什么是-xml" class="sidebar-link">什么是 XML</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#xml-和-html-的区别" class="sidebar-link">XML 和 HTML 的区别</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#xml-的缺点" class="sidebar-link">XML 的缺点</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#json-⭐⭐⭐" class="sidebar-link">JSON（⭐⭐⭐）</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#什么是json" class="sidebar-link">什么是JSON</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#json的两种结构" class="sidebar-link">JSON的两种结构</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#对象结构" class="sidebar-link">对象结构</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#数组结构" class="sidebar-link">数组结构</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#json语法注意事项" class="sidebar-link">JSON语法注意事项</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#json和js对象的关系" class="sidebar-link">JSON和JS对象的关系</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#json和js对象的互转" class="sidebar-link">JSON和JS对象的互转</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#序列化和反序列化" class="sidebar-link">序列化和反序列化</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#要实现的效果" class="sidebar-link">要实现的效果</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#定义-options-参数选项" class="sidebar-link">定义 options 参数选项</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#处理-data-参数" class="sidebar-link">处理 data 参数</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#定义itheima函数" class="sidebar-link">定义itheima函数</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#判断请求的类型" class="sidebar-link">判断请求的类型</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#旧版xmlhttprequest的缺点" class="sidebar-link">旧版XMLHttpRequest的缺点</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#xmlhttprequest-level2的新功能" class="sidebar-link">XMLHttpRequest Level2的新功能</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#设置http请求时限" class="sidebar-link">设置HTTP请求时限</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#formdata对象管理表单数据" class="sidebar-link">FormData对象管理表单数据</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#formdata对象管理表单数据-2" class="sidebar-link">FormData对象管理表单数据</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#上传文件" class="sidebar-link">上传文件</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#定义ui结构" class="sidebar-link">定义UI结构</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#验证是否选择了文件" class="sidebar-link">验证是否选择了文件</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#向formdata中追加文件" class="sidebar-link">向FormData中追加文件</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#使用-xhr-发起上传文件的请求" class="sidebar-link">使用 xhr 发起上传文件的请求</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#监听onreadystatechange事件" class="sidebar-link">监听onreadystatechange事件</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#显示文件上传进度" class="sidebar-link">显示文件上传进度</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#计算文件上传进度" class="sidebar-link">计算文件上传进度</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#导入需要的库" class="sidebar-link">导入需要的库</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#基于bootstrap渲染进度条" class="sidebar-link">基于Bootstrap渲染进度条</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#动态设置到进度条上" class="sidebar-link">动态设置到进度条上</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#监听上传完成的事件" class="sidebar-link">监听上传完成的事件</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#定义ui结构-2" class="sidebar-link">定义UI结构</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#验证是否选择了文件-2" class="sidebar-link">验证是否选择了文件</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#向formdata中追加文件-2" class="sidebar-link">向FormData中追加文件</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#使用jquery发起上传文件的请求" class="sidebar-link">使用jQuery发起上传文件的请求</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#jquery实现loading效果" class="sidebar-link">jQuery实现loading效果</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#ajaxstart-callback" class="sidebar-link">ajaxStart(callback)</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#ajaxstop-callback" class="sidebar-link">ajaxStop(callback)</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#什么是axios" class="sidebar-link">什么是axios</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#axios发起-get-请求" class="sidebar-link">axios发起 GET 请求</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#axios发起post请求" class="sidebar-link">axios发起POST请求</a></li><li class="sidebar-sub-header"><a href="/study/AJAX/day03/03.html#直接使用axios发起请求" class="sidebar-link">直接使用axios发起请求</a></li></ul></li><li><a href="/study/AJAX/day04/04.html" class="sidebar-link">Ajax - day04</a></li><li><a href="/study/AJAX/day05/05.html" class="sidebar-link">Ajax - day05</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="ajax-day03"><a href="#ajax-day03" class="header-anchor">#</a> Ajax - day03</h1> <ul><li>能够知道如何使用<code>XMLHttpRequest</code>发起<code>Ajax</code>请求</li> <li>能够知道如何封装自己的 Ajax 函数</li> <li>能够使用<code>XMLHttpRequest</code> <code>Level2</code>中提供的新特性</li> <li>能够知道<code>jQuery</code>中如何实现文件上传与 loading 效果</li> <li>能够知道如何使用<code>axios</code>发起 Ajax 请求</li></ul> <h1 id="xmlhttprequest的基本使用"><a href="#xmlhttprequest的基本使用" class="header-anchor">#</a> <code>XMLHttpRequest</code>的基本使用</h1> <h2 id="什么xmlhttprequest"><a href="#什么xmlhttprequest" class="header-anchor">#</a> 什么<code>XMLHttpRequest</code></h2> <p><code>XMLHttpRequest</code>（简称 <code>xhr</code>）是浏览器提供的 <code>Javascript</code> 对象，通过它，可以<strong>请求服务器上的数据资源</strong>。之</p> <p>前所学的 <code>jQuery</code> 中的 Ajax 函数，就是基于 <code>xhr</code> 对象封装出来的</p> <p><img src="/assets/img/xmlhttprequest.d1cde1cf.png" alt=""></p> <h2 id="使用xhr发起-get-请求-⭐⭐⭐"><a href="#使用xhr发起-get-请求-⭐⭐⭐" class="header-anchor">#</a> 使用<code>xhr</code>发起 GET 请求（⭐⭐⭐）</h2> <p><strong>步骤</strong></p> <ul><li><p>创建 <code>xhr</code> 对象</p></li> <li><p>调用 <code>xhr.open()</code> 函数</p></li> <li><p>调用 <code>xhr.send()</code> 函数</p></li> <li><p>监听 <code>xhr.onreadystatechange</code> 事件</p></li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 1. 创建 XHR 对象</span>
<span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 2. 调用 open 函数</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://www.liulongbin.top:3006/api/getbooks&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 3. 调用 send 函数</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 4. 监听 onreadystatechange 事件</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取服务器响应的数据</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="了解xhr对象的readystate属性"><a href="#了解xhr对象的readystate属性" class="header-anchor">#</a> 了解<code>xhr</code>对象的<code>readyState</code>属性</h2> <p><code>XMLHttpRequest</code> 对象的 <code>readyState</code> 属性，用来表示<strong>当前 <code>Ajax</code> 请求所处的状态</strong>。每个 <code>Ajax</code> 请求必然处于以</p> <p>下状态中的一个：</p> <p><img src="/assets/img/readyState.82665025.png" alt=""></p> <h2 id="使用xhr发起带参数的-get-请求"><a href="#使用xhr发起带参数的-get-请求" class="header-anchor">#</a> 使用<code>xhr</code>发起带参数的 GET 请求</h2> <p>使用 <code>xhr</code> 对象发起带参数的 <code>GET</code> 请求时，只需在调用 <code>xhr.open</code> 期间，为 <code>URL</code> 地址指定参数即可：</p> <p><img src="/assets/img/get.641dcb5a.png" alt=""></p> <p>这种在 URL 地址后面拼接的参数，叫做<strong>查询字符串</strong>。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://www.liulongbin.top:3006/api/getbooks?id=1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="查询字符串"><a href="#查询字符串" class="header-anchor">#</a> 查询字符串</h2> <h2 id="什么是查询字符串"><a href="#什么是查询字符串" class="header-anchor">#</a> 什么是查询字符串</h2> <p>**定义：**查询字符串（URL 参数）是指在 URL 的末尾加上用于向服务器发送信息的字符串（变量）。</p> <p>**格式：**将英文的 <strong>?</strong> 放在<code>URL</code> 的末尾，然后再加上 <strong>参数＝值</strong> ，想加上多个参数的话，使用 <strong>&amp;</strong> 符号进行分隔。以</p> <p>这个形式，可以将想要发送给服务器的数据添加到 <code>URL</code> 中。</p> <p><img src="/assets/img/1.866ce106.png" alt=""></p> <h2 id="get-请求携带参数的本质"><a href="#get-请求携带参数的本质" class="header-anchor">#</a> GET 请求携带参数的本质</h2> <p>无论使用 <code>$.ajax()</code>，还是使用 <code>$.get()</code>，又或者直接使用 <code>xhr</code> 对象发起 <code>GET</code> 请求，当需要携带参数的时候，本质上，都是直接将参数以查询字符串的形式，追加到 URL 地址的后面，发送到服务器的。</p> <p><img src="/assets/img/2.0eae4d7d.png" alt=""></p> <h2 id="url-编码与解码"><a href="#url-编码与解码" class="header-anchor">#</a> URL 编码与解码</h2> <h2 id="什么是-url-编码"><a href="#什么是-url-编码" class="header-anchor">#</a> 什么是 URL 编码</h2> <p><code>URL</code> 地址中，只允许出现英文相关的字母、标点符号、数字，因此，在 <code>URL</code> 地址中不允许出现中文字符。</p> <p>如果 URL 中需要包含中文这样的字符，则必须对中文字符进行<strong>编码</strong>（转义）。</p> <p><strong>URL 编码的原则</strong>：使用安全的字符（没有特殊用途或者特殊意义的可打印字符）去表示那些不安全的字符。</p> <p>URL 编码原则的通俗理解：使用英文字符去表示非英文字符</p> <p><img src="/assets/img/3.a76a33ac.png" alt=""></p> <h2 id="如何对-url-进行编码与解码"><a href="#如何对-url-进行编码与解码" class="header-anchor">#</a> 如何对 URL 进行编码与解码</h2> <p>浏览器提供了 <code>URL</code> 编码与解码的 <code>API</code>，分别是：</p> <ul><li><p><code>encodeURI()</code> 编码的函数</p></li> <li><p><code>decodeURI()</code> 解码的函数</p></li></ul> <p><img src="/assets/img/4.b5ed4db5.png" alt=""></p> <p><strong>由于浏览器会自动对 URL 地址进行编码操作，因此，大多数情况下，程序员不需要关心 URL 地址的编码</strong></p> <p><strong>与解码操作</strong></p> <p>更多关于 URL 编码的知识，请参考如下博客：</p> <p>https://blog.csdn.net/Lxd_0111/article/details/78028889</p> <h2 id="使用xhr发起post请求-⭐⭐⭐"><a href="#使用xhr发起post请求-⭐⭐⭐" class="header-anchor">#</a> 使用<code>xhr</code>发起<code>POST</code>请求（⭐⭐⭐）</h2> <p><strong>步骤</strong></p> <ul><li><p>创建 <code>xhr</code> 对象</p></li> <li><p>调用 <code>xhr.open()</code> 函数</p></li> <li><p><strong>设置 Content-Type 属性</strong>（固定写法）</p></li> <li><p>调用 <code>xhr.send()</code> 函数，<strong>同时指定要发送的数据</strong></p></li> <li><p>监听 <code>xhr.onreadystatechange</code> 事件</p></li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 1. 创建 xhr 对象</span>
<span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 2. 调用 open 函数</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://www.liulongbin.top:3006/api/addbook&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 3. 设置 Content-Type 属性（固定写法）</span>
xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Type&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;application/x-www-form-urlencoded&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 4. 调用 send 函数</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;bookname=水浒传&amp;author=施耐庵&amp;publisher=上海图书出版社&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 5. 监听事件</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h1 id="数据交换格式"><a href="#数据交换格式" class="header-anchor">#</a> 数据交换格式</h1> <h2 id="什么是数据交换格式"><a href="#什么是数据交换格式" class="header-anchor">#</a> 什么是数据交换格式</h2> <p>数据交换格式，就是<strong>服务器端</strong>与<strong>客户端</strong>之间进行<strong>数据传输与交换的格式</strong></p> <p>前端领域，经常提及的两种数据交换格式分别是 <code>XML</code> 和 <code>JSON</code>。其中 <code>XML</code> 用的非常少，所以，我们重点要学</p> <p>习的数据交换格式就是 <code>JSON</code></p> <p><img src="/assets/img/5.3bfe17f9.png" alt=""></p> <h2 id="xml"><a href="#xml" class="header-anchor">#</a> XML</h2> <h2 id="什么是-xml"><a href="#什么是-xml" class="header-anchor">#</a> 什么是 XML</h2> <p><code>XML</code> 的英文全称是 <code>EXtensible Markup Language</code>，即<strong>可扩展标记语言</strong>。因此，<code>XML</code> 和 <code>HTML</code> 类似，</p> <p>也是一种标记语言。</p> <p><img src="/assets/img/6.caf9caa9.png" alt=""></p> <h2 id="xml-和-html-的区别"><a href="#xml-和-html-的区别" class="header-anchor">#</a> XML 和 HTML 的区别</h2> <p><code>XML</code> 和 <code>HTML</code> 虽然都是标记语言，但是，它们两者之间没有任何的关系。</p> <ul><li><p><code>HTML</code> 被设计用来描述网页上的<strong>内容</strong>，是网页内容的载体</p></li> <li><p><code>XML</code> 被设计用来<strong>传输和存储数据</strong>，是数据的载体</p></li></ul> <p><img src="/assets/img/7.3a13ca75.png" alt=""></p> <h2 id="xml-的缺点"><a href="#xml-的缺点" class="header-anchor">#</a> XML 的缺点</h2> <p><img src="/assets/img/8.e2842d8a.png" alt=""></p> <ul><li><p><code>XML</code> 格式臃肿，和数据无关的代码多，体积大，传输效率低</p></li> <li><p>在 <code>Javascript</code> 中解析 <code>XML</code> 比较麻烦</p></li></ul> <h2 id="json-⭐⭐⭐"><a href="#json-⭐⭐⭐" class="header-anchor">#</a> <code>JSON（⭐⭐⭐）</code></h2> <h2 id="什么是json"><a href="#什么是json" class="header-anchor">#</a> 什么是<code>JSON</code></h2> <p><strong>概念：</strong><code>JSON</code> 的英文全称是 <code>JavaScript Object Notation</code>，即“<strong>JavaScript 对象表示法</strong>”。简单来讲，</p> <p><code>JSON</code> 就是 <code>Javascript</code> 对象和数组的字符串表示法，它使用文本表示一个 <code>JS</code> 对象或数组的信息，因此，</p> <p><strong><code>JSON</code> 的本质是字符串</strong>。</p> <p><strong>作用：</strong><code>JSON</code> 是一种轻量级的文本数据交换格式，在作用上类似于 <code>XML</code>，专门用于存储和传输数据，但</p> <p>是 <code>JSON</code> 比 <code>XML</code> 更小、更快、更易解析。</p> <p><strong>现状：</strong><code>JSON</code> 是在 2001 年开始被推广和使用的数据格式，到现今为止，<code>JSON</code> 已经成为了主流的数据交</p> <p>换格式</p> <h2 id="json的两种结构"><a href="#json的两种结构" class="header-anchor">#</a> <code>JSON</code>的两种结构</h2> <p><code>JSON</code> 就是用字符串来表示 <code>Javascript</code> 的对象和数组。所以，<code>JSON</code> 中包含<strong>对象</strong>和<strong>数组</strong>两种结构，通过这</p> <p>两种结构的相互嵌套，可以表示各种复杂的数据结构。</p> <h2 id="对象结构"><a href="#对象结构" class="header-anchor">#</a> <strong>对象结构</strong></h2> <p>对象结构在 <code>JSON</code> 中表示为 <code>{ }</code> 括起来的内容。数据结构为 <code>{ key: value, key: value, … }</code> 的键</p> <p>值对结构。其中，<code>key</code> 必须是使用英文的双引号包裹的字符串，<code>value</code> 的数据类型可以是<strong>数字、字符串、</strong></p> <p><strong>布尔值、null、数组、对象</strong>6 种类型。</p> <p><img src="/assets/img/9.e2ca532f.png" alt=""></p> <h2 id="数组结构"><a href="#数组结构" class="header-anchor">#</a> <strong>数组结构</strong></h2> <p>数组结构在 <code>JSON</code> 中表示为 <code>[ ]</code> 括起来的内容。数据结构为 <code>[ &quot;java&quot;, &quot;javascript&quot;, 30, true … ]</code> 。</p> <p>数组中数据的类型可以是<strong>数字、字符串、布尔值、null、数组、对象</strong>6 种类型。</p> <p><img src="/assets/img/10.d7fcbccf.png" alt=""></p> <h2 id="json语法注意事项"><a href="#json语法注意事项" class="header-anchor">#</a> <code>JSON</code>语法注意事项</h2> <p>① 属性名必须使用双引号包裹</p> <p>② 字符串类型的值必须使用双引号包裹</p> <p>③ <code>JSON</code> 中不允许使用单引号表示字符串</p> <p>④ <code>JSON</code> 中不能写注释</p> <p>⑤ <code>JSON</code> 的最外层必须是对象或数组格式</p> <p>⑥ 不能使用 <code>undefined</code> 或函数作为 <code>JSON</code> 的值</p> <p>**<code>JSON</code> 的作用：**在计算机与网络之间存储和传输数据。</p> <p>**<code>JSON</code> 的本质：**用字符串来表示 <code>Javascript</code> 对象数据或数组数据</p> <h2 id="json和js对象的关系"><a href="#json和js对象的关系" class="header-anchor">#</a> <code>JSON</code>和<code>JS</code>对象的关系</h2> <p><code>JSON</code> 是 <code>JS</code> 对象的字符串表示法，它使用文本表示一个 <code>JS</code> 对象的信息，本质是一个字符串。例如：</p> <p><img src="/assets/img/11.95065e9a.png" alt=""></p> <h2 id="json和js对象的互转"><a href="#json和js对象的互转" class="header-anchor">#</a> <code>JSON</code>和<code>JS</code>对象的互转</h2> <p>要实现从 <code>JSON</code> 字符串转换为 <code>JS</code> 对象，使用 <code>JSON.parse()</code> 方法：</p> <p><img src="/assets/img/12.d7708c7c.png" alt=""></p> <p>要实现从 <code>JS</code> 对象转换为 <code>JSON</code> 字符串，使用 <code>JSON.stringify()</code> 方法：</p> <p><img src="/assets/img/13.38e5b1c3.png" alt=""></p> <p><strong>应用场景</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://www.liulongbin.top:3006/api/getbooks&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="序列化和反序列化"><a href="#序列化和反序列化" class="header-anchor">#</a> 序列化和反序列化</h2> <p>把<strong>数据对象</strong> <strong>转换为</strong> <strong>字符串</strong>的过程，叫做<strong>序列化</strong>，例如：调用 <code>JSON.stringify()</code> 函数的操作，叫做 <code>JSON</code> 序列化。</p> <p>把<strong>字符串</strong> <strong>转换为</strong> <strong>数据对象</strong>的过程，叫做<strong>反序列化</strong>，例如：调用 <code>JSON.parse()</code> 函数的操作，叫做 <code>JSON</code> 反序列化。</p> <h1 id="封装自己的-ajax-函数-⭐⭐⭐"><a href="#封装自己的-ajax-函数-⭐⭐⭐" class="header-anchor">#</a> 封装自己的 Ajax 函数（⭐⭐⭐）</h1> <h2 id="要实现的效果"><a href="#要实现的效果" class="header-anchor">#</a> 要实现的效果</h2> <p><img src="/assets/img/14.ac6d6323.png" alt=""></p> <h2 id="定义-options-参数选项"><a href="#定义-options-参数选项" class="header-anchor">#</a> 定义 options 参数选项</h2> <p><code>itheima()</code> 函数是我们自定义的 <code>Ajax</code> 函数，它接收一个配置对象作为参数，配置对象中可以配置如下属性：</p> <ul><li><p><code>method</code> 请求的类型</p></li> <li><p><code>url</code> 请求的 <code>URL</code> 地址</p></li> <li><p><code>data</code> 请求携带的数据</p></li> <li><p><code>success</code> 请求成功之后的回调函数</p></li></ul> <h2 id="处理-data-参数"><a href="#处理-data-参数" class="header-anchor">#</a> 处理 data 参数</h2> <p>需要把 <code>data</code> 对象，转化成查询字符串的格式，从而提交给服务器，因此提前定义 <code>resolveData</code> 函数如下：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/*** 处理 data 参数
 * @param {data} 需要发送到服务器的数据
 * @returns {string} 返回拼接好的查询字符串 name=zs&amp;age=10
 */</span>
<span class="token keyword">function</span> <span class="token function">resolveData</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> k <span class="token keyword">in</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> str <span class="token operator">=</span> k <span class="token operator">+</span> <span class="token string">&quot;=&quot;</span> <span class="token operator">+</span> data<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>
    arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;&amp;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="定义itheima函数"><a href="#定义itheima函数" class="header-anchor">#</a> 定义<code>itheima</code>函数</h2> <p>在 <code>itheima()</code> 函数中，需要创建 <code>xhr</code> 对象，并监听 <code>onreadystatechange</code> 事件：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">itheima</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 把外界传递过来的参数对象，转换为 查询字符串</span>
  <span class="token keyword">var</span> qs <span class="token operator">=</span> <span class="token function">resolveData</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 注册监听</span>
  xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 注册监听</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 把服务器的json字符串转成js对象</span>
      <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
      options<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="判断请求的类型"><a href="#判断请求的类型" class="header-anchor">#</a> 判断请求的类型</h2> <p>不同的请求类型，对应 <code>xhr</code> 对象的不同操作，因此需要对请求类型进行 <code>if … else …</code> 的判断：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>method<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;GET&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 发起GET请求</span>
  xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>method<span class="token punctuation">,</span> options<span class="token punctuation">.</span>url <span class="token operator">+</span> <span class="token string">&quot;?&quot;</span> <span class="token operator">+</span> qs<span class="token punctuation">)</span><span class="token punctuation">;</span>
  xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>method<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 发起POST请求</span>
  xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>method<span class="token punctuation">,</span> options<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
  xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Type&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;application/x-www-form-urlencoded&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>qs<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h1 id="xmlhttprequest-level2的新特性"><a href="#xmlhttprequest-level2的新特性" class="header-anchor">#</a> <code>XMLHttpRequest Level2</code>的新特性</h1> <h2 id="旧版xmlhttprequest的缺点"><a href="#旧版xmlhttprequest的缺点" class="header-anchor">#</a> 旧版<code>XMLHttpRequest</code>的缺点</h2> <ul><li><p>只支持文本数据的传输，无法用来读取和上传文件</p></li> <li><p>传送和接收数据时，没有进度信息，只能提示有没有完成</p></li></ul> <h2 id="xmlhttprequest-level2的新功能"><a href="#xmlhttprequest-level2的新功能" class="header-anchor">#</a> <code>XMLHttpRequest Level2</code>的新功能</h2> <ul><li><p>可以设置 HTTP 请求的时限</p></li> <li><p>可以使用 <code>FormData</code> 对象管理表单数据</p></li> <li><p>可以上传文件</p></li> <li><p>可以获得数据传输的进度信息</p></li></ul> <h2 id="设置http请求时限"><a href="#设置http请求时限" class="header-anchor">#</a> 设置<code>HTTP</code>请求时限</h2> <p>有时，<code>Ajax</code> 操作很耗时，而且无法预知要花多少时间。如果网速很慢，用户可能要等很久。新版本的 <code>XMLHttpRequest</code> 对象，增加了 <code>timeout</code> 属性，可以设置 <code>HTTP</code> 请求的时限：</p> <p><img src="data:image/png;base64,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" alt=""></p> <p>上面的语句，将最长等待时间设为 3000 毫秒。过了这个时限，就自动停止 HTTP 请求。与之配套的还有一个</p> <p><code>timeout</code> 事件，用来指定回调函数：</p> <p><img src="/assets/img/16.0b5b712a.png" alt=""></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
  <span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">// 设置 超时时间</span>
  xhr<span class="token punctuation">.</span>timeout <span class="token operator">=</span> <span class="token number">30</span>
  <span class="token comment">// 设置超时以后的处理函数</span>
  xhr<span class="token punctuation">.</span><span class="token function-variable function">ontimeout</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'请求超时了！'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'http://www.liulongbin.top:3006/api/getbooks'</span><span class="token punctuation">)</span>
  xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="formdata对象管理表单数据"><a href="#formdata对象管理表单数据" class="header-anchor">#</a> <code>FormData</code>对象管理表单数据</h2> <p>Ajax 操作往往用来提交表单数据。为了方便表单处理，<code>HTML5</code> 新增了一个 <code>FormData</code> 对象，可以模拟表单操作：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 1. 新建 FormData 对象</span>
<span class="token keyword">var</span> fd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 2. 为 FormData 添加表单项</span>
fd<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;uname&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;zs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fd<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;upwd&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 3. 创建 XHR 对象</span>
<span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 4. 指定请求类型与URL地址</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://www.liulongbin.top:3006/api/formdata&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 5. 直接提交 FormData 对象，这与提交网页表单的效果，完全一样</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>fd<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="formdata对象管理表单数据-2"><a href="#formdata对象管理表单数据-2" class="header-anchor">#</a> <code>FormData</code>对象管理表单数据</h2> <p><code>FormData</code>对象也可以用来获取网页表单的值，示例代码如下：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 获取表单元素</span>
<span class="token keyword">var</span> form <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#form1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 监听表单元素的 submit 事件</span>
form<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;submit&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 根据 form 表单创建 FormData 对象，会自动将表单数据填充到 FormData 对象中</span>
  <span class="token keyword">var</span> fd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span>form<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://www.liulongbin.top:3006/api/formdata&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>fd<span class="token punctuation">)</span><span class="token punctuation">;</span>
  xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="上传文件"><a href="#上传文件" class="header-anchor">#</a> 上传文件</h2> <p>新版 <code>XMLHttpRequest</code> 对象，不仅可以发送文本信息，还可以上传文件。</p> <p><strong>实现步骤：</strong></p> <p>① 定义 <code>UI</code> 结构</p> <p>② 验证是否选择了文件</p> <p>③ 向 <code>FormData</code> 中追加文件</p> <p>④ 使用 <code>xhr</code> 发起上传文件的请求</p> <p>⑤ 监听 <code>onreadystatechange</code> 事件</p> <h2 id="定义ui结构"><a href="#定义ui结构" class="header-anchor">#</a> 定义<code>UI</code>结构</h2> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 1. 文件选择框 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token comment">&lt;!-- 2. 上传按钮 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btnUpload<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>上传文件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
<span class="token comment">&lt;!-- 3. 显示上传到服务器上的图片 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>800<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="验证是否选择了文件"><a href="#验证是否选择了文件" class="header-anchor">#</a> 验证是否选择了文件</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 1. 获取上传文件的按钮</span>
<span class="token keyword">var</span> btnUpload <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#btnUpload&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 2. 为按钮添加 click 事件监听</span>
btnUpload<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 3. 获取到选择的文件列表</span>
  <span class="token keyword">var</span> files <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#file1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>files<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>files<span class="token punctuation">.</span>length <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;请选择要上传的文件！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...后续业务逻辑</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="向formdata中追加文件"><a href="#向formdata中追加文件" class="header-anchor">#</a> 向<code>FormData</code>中追加文件</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 1. 创建 FormData 对象</span>
<span class="token keyword">var</span> fd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 2. 向 FormData 中追加文件</span>
fd<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;avatar&quot;</span><span class="token punctuation">,</span> files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="使用-xhr-发起上传文件的请求"><a href="#使用-xhr-发起上传文件的请求" class="header-anchor">#</a> 使用 <code>xhr</code> 发起上传文件的请求</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 1. 创建 xhr 对象</span>
<span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 2. 调用 open 函数，指定请求类型与URL地址。其中，请求类型必须为 POST</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://www.liulongbin.top:3006/api/upload/avatar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 3. 发起请求</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>fd<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="监听onreadystatechange事件"><a href="#监听onreadystatechange事件" class="header-anchor">#</a> 监听<code>onreadystatechange</code>事件</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 上传文件成功</span>
      <span class="token comment">// 将服务器返回的图片地址，设置为 &lt;img&gt; 标签的 src 属性</span>
      document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#img&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>src <span class="token operator">=</span>
        <span class="token string">&quot;http://www.liulongbin.top:3006&quot;</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>url<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// 上传文件失败</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="显示文件上传进度"><a href="#显示文件上传进度" class="header-anchor">#</a> 显示文件上传进度</h2> <h2 id="计算文件上传进度"><a href="#计算文件上传进度" class="header-anchor">#</a> 计算文件上传进度</h2> <p>新版本的 <code>XMLHttpRequest</code> 对象中，可以通过监听 <code>xhr.upload.onprogress</code> 事件，来获取到文件的上传进度。语法格式如下：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 创建 XHR 对象</span>
<span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 监听 xhr.upload 的 onprogress 事件</span>
xhr<span class="token punctuation">.</span>upload<span class="token punctuation">.</span><span class="token function-variable function">onprogress</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// e.lengthComputable 是一个布尔值，表示当前上传的资源是否具有可计算的长度</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>lengthComputable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// e.loaded 已传输的字节</span>
    <span class="token comment">// e.total 需传输的总字节</span>
    <span class="token keyword">var</span> percentComplete <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>loaded <span class="token operator">/</span> e<span class="token punctuation">.</span>total<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="导入需要的库"><a href="#导入需要的库" class="header-anchor">#</a> 导入需要的库</h2> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./lib/bootstrap.css<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./lib/jquery.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="基于bootstrap渲染进度条"><a href="#基于bootstrap渲染进度条" class="header-anchor">#</a> 基于<code>Bootstrap</code>渲染进度条</h2> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 进度条 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>progress<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 500px<span class="token punctuation">;</span> <span class="token property">margin</span><span class="token punctuation">:</span> 10px 0<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>progress-bar progress-bar-info progress-barstriped active<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>percent<span class="token punctuation">&quot;</span></span>
    <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 0%</span><span class="token punctuation">&quot;</span></span></span>
  <span class="token punctuation">&gt;</span></span>
    0%
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="动态设置到进度条上"><a href="#动态设置到进度条上" class="header-anchor">#</a> 动态设置到进度条上</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>xhr<span class="token punctuation">.</span>upload<span class="token punctuation">.</span><span class="token function-variable function">onprogress</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>lengthComputable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. 计算出当前上传进度的百分比</span>
    <span class="token keyword">var</span> percentComplete <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>loaded <span class="token operator">/</span> e<span class="token punctuation">.</span>total<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#percent&quot;</span><span class="token punctuation">)</span>
      <span class="token comment">// 2. 设置进度条的宽度</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;style&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;width:&quot;</span> <span class="token operator">+</span> percentComplete <span class="token operator">+</span> <span class="token string">&quot;%&quot;</span><span class="token punctuation">)</span>
      <span class="token comment">// 3. 显示当前的上传进度百分比</span>
      <span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>percentComplete <span class="token operator">+</span> <span class="token string">&quot;%&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="监听上传完成的事件"><a href="#监听上传完成的事件" class="header-anchor">#</a> 监听上传完成的事件</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>xhr<span class="token punctuation">.</span>upload<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#percent&quot;</span><span class="token punctuation">)</span>
    <span class="token comment">// 移除上传中的类样式</span>
    <span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 添加上传完成的类样式</span>
    <span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">&quot;progress-bar progress-bar-success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h1 id="jquery高级用法-jquery实现文件上传-⭐⭐⭐"><a href="#jquery高级用法-jquery实现文件上传-⭐⭐⭐" class="header-anchor">#</a> <code>jQuery</code>高级用法- <code>jQuery</code>实现文件上传（⭐⭐⭐）</h1> <h2 id="定义ui结构-2"><a href="#定义ui结构-2" class="header-anchor">#</a> 定义<code>UI</code>结构</h2> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 导入 jQuery --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./lib/jquery.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 文件选择框 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token comment">&lt;!-- 上传文件按钮 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btnUpload<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>上传<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="验证是否选择了文件-2"><a href="#验证是否选择了文件-2" class="header-anchor">#</a> 验证是否选择了文件</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#btnUpload'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token comment">// 1. 将 jQuery 对象转化为 DOM 对象，并获取选中的文件列表</span>
     <span class="token keyword">var</span> files <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#file1'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>files
     <span class="token comment">// 2. 判断是否选择了文件</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>files<span class="token punctuation">.</span>length <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     	<span class="token keyword">return</span> <span class="token function">alert</span><span class="token punctuation">(</span>'请选择图片后再上传！‘<span class="token punctuation">)</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="向formdata中追加文件-2"><a href="#向formdata中追加文件-2" class="header-anchor">#</a> 向<code>FormData</code>中追加文件</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 向 FormData 中追加文件</span>
<span class="token keyword">var</span> fd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fd<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;avatar&quot;</span><span class="token punctuation">,</span> files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="使用jquery发起上传文件的请求"><a href="#使用jquery发起上传文件的请求" class="header-anchor">#</a> 使用<code>jQuery</code>发起上传文件的请求</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  method<span class="token operator">:</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span>
  url<span class="token operator">:</span> <span class="token string">&quot;http://www.liulongbin.top:3006/api/upload/avatar&quot;</span><span class="token punctuation">,</span>
  data<span class="token operator">:</span> fd<span class="token punctuation">,</span>
  <span class="token comment">// 不修改 Content-Type 属性，使用 FormData 默认的 Content-Type 值</span>
  contentType<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token comment">// 不对 FormData 中的数据进行 url 编码，而是将 FormData 数据原样发送到服务器</span>
  processData<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="jquery实现loading效果"><a href="#jquery实现loading效果" class="header-anchor">#</a> <code>jQuery</code>实现<code>loading</code>效果</h2> <h2 id="ajaxstart-callback"><a href="#ajaxstart-callback" class="header-anchor">#</a> <code>ajaxStart(callback)</code></h2> <p><code>Ajax</code> 请求<strong>开始</strong>时，执行 <code>ajaxStart</code> 函数。可以在 <code>ajaxStart</code> 的 <code>callback</code> 中显示 <code>loading</code> 效果，示例代码如下：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 自 jQuery 版本 1.8 起，该方法只能被附加到文档</span>
<span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ajaxStart</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#loading&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>注意：</strong> <code>$(document).ajaxStart()</code> 函数<strong>会监听当前文档内所有的 Ajax 请求</strong>。</p> <h2 id="ajaxstop-callback"><a href="#ajaxstop-callback" class="header-anchor">#</a> <code>ajaxStop(callback)</code></h2> <p><code>Ajax</code> 请求<strong>结束</strong>时，执行 <code>ajaxStop</code> 函数。可以在 <code>ajaxStop</code> 的 <code>callback</code> 中隐藏 <code>loading</code> 效果，示例代码如下：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 自 jQuery 版本 1.8 起，该方法只能被附加到文档</span>
<span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ajaxStop</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#loading&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h1 id="axios-⭐⭐⭐"><a href="#axios-⭐⭐⭐" class="header-anchor">#</a> <code>axios（⭐⭐⭐）</code></h1> <h2 id="什么是axios"><a href="#什么是axios" class="header-anchor">#</a> 什么是<code>axios</code></h2> <p><code>Axios</code> 是专注于<strong>网络数据请求</strong>的库。</p> <p>相比于原生的 <code>XMLHttpRequest</code> 对象，<code>axios</code> <strong>简单易用</strong>。</p> <p>相比于 <code>jQuery</code>，<code>axios</code> 更加<strong>轻量化</strong>，只专注于网络数据请求。</p> <h2 id="axios发起-get-请求"><a href="#axios发起-get-请求" class="header-anchor">#</a> <code>axios</code>发起 GET 请求</h2> <p><code>axios</code> 发起 <code>get</code> 请求的语法：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>axios
  <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    params<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">/*参数*/</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>具体的请求示例如下：</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 请求的 URL 地址</span>
<span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token string">&quot;http://www.liulongbin.top:3006/api/get&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 请求的参数对象</span>
<span class="token keyword">var</span> paramsObj <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;zs&quot;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 调用 axios.get() 发起 GET 请求</span>
axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span> params<span class="token operator">:</span> paramsObj <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// res.data 是服务器返回的数据</span>
  <span class="token keyword">var</span> result <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="axios发起post请求"><a href="#axios发起post请求" class="header-anchor">#</a> <code>axios</code>发起<code>POST</code>请求</h2> <p><code>axios</code> 发起 <code>post</code> 请求的语法：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>axios
  <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token comment">/*参数*/</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>具体的请求示例如下：</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 请求的 URL 地址</span>
<span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token string">&quot;http://www.liulongbin.top:3006/api/post&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 要提交到服务器的数据</span>
<span class="token keyword">var</span> dataObj <span class="token operator">=</span> <span class="token punctuation">{</span> location<span class="token operator">:</span> <span class="token string">&quot;北京&quot;</span><span class="token punctuation">,</span> address<span class="token operator">:</span> <span class="token string">&quot;顺义&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 调用 axios.post() 发起 POST 请求</span>
axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> dataObj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// res.data 是服务器返回的数据</span>
  <span class="token keyword">var</span> result <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="直接使用axios发起请求"><a href="#直接使用axios发起请求" class="header-anchor">#</a> 直接使用<code>axios</code>发起请求</h2> <p><code>axios</code> 也提供了类似于 <code>jQuery</code> 中 <code>$.ajax()</code> 的函数，语法如下：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  method<span class="token operator">:</span> <span class="token string">&quot;请求类型&quot;</span><span class="token punctuation">,</span>
  url<span class="token operator">:</span> <span class="token string">&quot;请求的URL地址&quot;</span><span class="token punctuation">,</span>
  data<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">/* POST数据 */</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  params<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">/* GET参数 */</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>发起 get 请求</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#btn3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token string">&quot;http://www.liulongbin.top:3006/api/get&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> paramsData <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;钢铁侠&quot;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">35</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    method<span class="token operator">:</span> <span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span>
    url<span class="token operator">:</span> url<span class="token punctuation">,</span>
    params<span class="token operator">:</span> paramsData<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>发起 post 请求</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#btn4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    method<span class="token operator">:</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span>
    url<span class="token operator">:</span> <span class="token string">&quot;http://www.liulongbin.top:3006/api/post&quot;</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&quot;娃哈哈&quot;</span><span class="token punctuation">,</span>
      age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
      gender<span class="token operator">:</span> <span class="token string">&quot;女&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/8/2021, 5:36:31 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/study/AJAX/day02/02.html" class="prev">
        Ajax - day02
      </a></span> <span class="next"><a href="/study/AJAX/day04/04.html">
        Ajax - day04
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.e7ac4fdd.js" defer></script><script src="/assets/js/2.5013479a.js" defer></script><script src="/assets/js/19.d8c2755b.js" defer></script>
  </body>
</html>
