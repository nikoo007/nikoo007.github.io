<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>NodeJs - day03 | 前端笔记</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="在线笔记">
    
    <link rel="preload" href="/assets/css/0.styles.b4c82722.css" as="style"><link rel="preload" href="/assets/js/app.e7ac4fdd.js" as="script"><link rel="preload" href="/assets/js/2.5013479a.js" as="script"><link rel="preload" href="/assets/js/17.685c7f62.js" as="script"><link rel="prefetch" href="/assets/js/10.e05b3687.js"><link rel="prefetch" href="/assets/js/11.77bcc942.js"><link rel="prefetch" href="/assets/js/12.d4cee816.js"><link rel="prefetch" href="/assets/js/13.695b6e01.js"><link rel="prefetch" href="/assets/js/14.054e91c7.js"><link rel="prefetch" href="/assets/js/15.64b52713.js"><link rel="prefetch" href="/assets/js/16.88cc1d9d.js"><link rel="prefetch" href="/assets/js/18.4c866b21.js"><link rel="prefetch" href="/assets/js/19.d8c2755b.js"><link rel="prefetch" href="/assets/js/20.627cc844.js"><link rel="prefetch" href="/assets/js/21.fd08fc3e.js"><link rel="prefetch" href="/assets/js/22.940fa810.js"><link rel="prefetch" href="/assets/js/23.3a4eab6c.js"><link rel="prefetch" href="/assets/js/24.69b8444e.js"><link rel="prefetch" href="/assets/js/25.1aecb394.js"><link rel="prefetch" href="/assets/js/26.b46213ba.js"><link rel="prefetch" href="/assets/js/27.e6a54228.js"><link rel="prefetch" href="/assets/js/28.9862105f.js"><link rel="prefetch" href="/assets/js/29.8795c4a3.js"><link rel="prefetch" href="/assets/js/3.9386a395.js"><link rel="prefetch" href="/assets/js/30.f787c60b.js"><link rel="prefetch" href="/assets/js/31.04108a8c.js"><link rel="prefetch" href="/assets/js/32.45e51a05.js"><link rel="prefetch" href="/assets/js/33.8db49f66.js"><link rel="prefetch" href="/assets/js/34.3e9b91f2.js"><link rel="prefetch" href="/assets/js/35.4b0712fb.js"><link rel="prefetch" href="/assets/js/36.e38e909a.js"><link rel="prefetch" href="/assets/js/37.353c78b2.js"><link rel="prefetch" href="/assets/js/38.606d7188.js"><link rel="prefetch" href="/assets/js/39.44e0e36d.js"><link rel="prefetch" href="/assets/js/4.b58620dd.js"><link rel="prefetch" href="/assets/js/40.02e63798.js"><link rel="prefetch" href="/assets/js/41.79caf09d.js"><link rel="prefetch" href="/assets/js/42.314c72fc.js"><link rel="prefetch" href="/assets/js/43.9e2ff031.js"><link rel="prefetch" href="/assets/js/44.0cef4bb9.js"><link rel="prefetch" href="/assets/js/45.1d6b5fcd.js"><link rel="prefetch" href="/assets/js/46.b96f3f3d.js"><link rel="prefetch" href="/assets/js/47.124a94d3.js"><link rel="prefetch" href="/assets/js/48.5522be19.js"><link rel="prefetch" href="/assets/js/49.88610c03.js"><link rel="prefetch" href="/assets/js/5.f8c621de.js"><link rel="prefetch" href="/assets/js/50.48572f7f.js"><link rel="prefetch" href="/assets/js/51.e249fc66.js"><link rel="prefetch" href="/assets/js/52.2d52565f.js"><link rel="prefetch" href="/assets/js/53.3990b1ef.js"><link rel="prefetch" href="/assets/js/54.b9ddf1bf.js"><link rel="prefetch" href="/assets/js/55.7df4faa1.js"><link rel="prefetch" href="/assets/js/56.36a9fef1.js"><link rel="prefetch" href="/assets/js/57.07c62e9b.js"><link rel="prefetch" href="/assets/js/58.ba7e0e60.js"><link rel="prefetch" href="/assets/js/59.21bc408c.js"><link rel="prefetch" href="/assets/js/6.7965e0cd.js"><link rel="prefetch" href="/assets/js/60.89e484fb.js"><link rel="prefetch" href="/assets/js/61.5da768e4.js"><link rel="prefetch" href="/assets/js/62.ac4f3bdc.js"><link rel="prefetch" href="/assets/js/63.8071db04.js"><link rel="prefetch" href="/assets/js/64.00ca93ad.js"><link rel="prefetch" href="/assets/js/65.dd327f9a.js"><link rel="prefetch" href="/assets/js/66.19bcd8b7.js"><link rel="prefetch" href="/assets/js/67.2c701616.js"><link rel="prefetch" href="/assets/js/7.9b470e3d.js"><link rel="prefetch" href="/assets/js/8.85b20668.js"><link rel="prefetch" href="/assets/js/9.6c0adfab.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b4c82722.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="./logo.png" alt="前端笔记" class="logo"> <span class="site-name can-hide">前端笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开班教程" class="dropdown-title"><span class="title">开班教程</span> <span class="arrow down"></span></button> <button type="button" aria-label="开班教程" class="mobile-dropdown-title"><span class="title">开班教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://fanyouf.gitee.io/u1word/#/h5" target="_blank" rel="noopener noreferrer" class="nav-link external">
  单词掌握
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发工具" class="dropdown-title"><span class="title">开发工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发工具" class="mobile-dropdown-title"><span class="title">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  VsCode
</a></li><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  MySql
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="课程笔记" class="dropdown-title"><span class="title">课程笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="课程笔记" class="mobile-dropdown-title"><span class="title">课程笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          课程笔记
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/study/AJAX/day01/01.html" class="nav-link">
  AJAX
</a></li><li class="dropdown-subitem"><a href="/study/BigEvent/day01/01.html" class="nav-link">
  BigEvent
</a></li><li class="dropdown-subitem"><a href="/study/Eacharts/day01/01.html" class="nav-link">
  Eacharts
</a></li><li class="dropdown-subitem"><a href="/study/Git/day01/01.html" class="nav-link">
  Git
</a></li><li class="dropdown-subitem"><a href="/study/JS基础/js-day01/01.html" class="nav-link">
  JS基础
</a></li><li class="dropdown-subitem"><a href="/study/Jquery/day01/01.html" class="nav-link">
  Jquery
</a></li><li class="dropdown-subitem"><a href="/study/Js高级/js高级day01/JavaScript高级第01天笔记.html" class="nav-link">
  Js高级
</a></li><li class="dropdown-subitem"><a href="/study/NodeJs/day01/01.html" class="nav-link">
  NodeJs
</a></li><li class="dropdown-subitem"><a href="/study/Vue基础/Day01/01.html" class="nav-link">
  Vue基础
</a></li><li class="dropdown-subitem"><a href="/study/webAPI/day01/01.html" class="nav-link">
  webAPI
</a></li><li class="dropdown-subitem"><a href="/study/黑马头条/day01/01-项目初始化.html" class="nav-link">
  黑马头条
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://www.apifox.cn/apidoc/shared-fa9274ac-362e-4905-806b-6135df6aa90e/doc-842135" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线Api接口
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="http://heima-project.gitee.io/fe-up/#/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  面试宝典
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开班教程" class="dropdown-title"><span class="title">开班教程</span> <span class="arrow down"></span></button> <button type="button" aria-label="开班教程" class="mobile-dropdown-title"><span class="title">开班教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://fanyouf.gitee.io/u1word/#/h5" target="_blank" rel="noopener noreferrer" class="nav-link external">
  单词掌握
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发工具" class="dropdown-title"><span class="title">开发工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发工具" class="mobile-dropdown-title"><span class="title">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  VsCode
</a></li><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  MySql
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="课程笔记" class="dropdown-title"><span class="title">课程笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="课程笔记" class="mobile-dropdown-title"><span class="title">课程笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          课程笔记
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/study/AJAX/day01/01.html" class="nav-link">
  AJAX
</a></li><li class="dropdown-subitem"><a href="/study/BigEvent/day01/01.html" class="nav-link">
  BigEvent
</a></li><li class="dropdown-subitem"><a href="/study/Eacharts/day01/01.html" class="nav-link">
  Eacharts
</a></li><li class="dropdown-subitem"><a href="/study/Git/day01/01.html" class="nav-link">
  Git
</a></li><li class="dropdown-subitem"><a href="/study/JS基础/js-day01/01.html" class="nav-link">
  JS基础
</a></li><li class="dropdown-subitem"><a href="/study/Jquery/day01/01.html" class="nav-link">
  Jquery
</a></li><li class="dropdown-subitem"><a href="/study/Js高级/js高级day01/JavaScript高级第01天笔记.html" class="nav-link">
  Js高级
</a></li><li class="dropdown-subitem"><a href="/study/NodeJs/day01/01.html" class="nav-link">
  NodeJs
</a></li><li class="dropdown-subitem"><a href="/study/Vue基础/Day01/01.html" class="nav-link">
  Vue基础
</a></li><li class="dropdown-subitem"><a href="/study/webAPI/day01/01.html" class="nav-link">
  webAPI
</a></li><li class="dropdown-subitem"><a href="/study/黑马头条/day01/01-项目初始化.html" class="nav-link">
  黑马头条
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://www.apifox.cn/apidoc/shared-fa9274ac-362e-4905-806b-6135df6aa90e/doc-842135" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线Api接口
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="http://heima-project.gitee.io/fe-up/#/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  面试宝典
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/study/NodeJs/day01/01.html" class="sidebar-link">NodeJs - day01</a></li><li><a href="/study/NodeJs/day02/02.html" class="sidebar-link">NodeJs - day02</a></li><li><a href="/study/NodeJs/day03/03.html" aria-current="page" class="active sidebar-link">NodeJs - day03</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#概念" class="sidebar-link">概念</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_1-多人协作的问题" class="sidebar-link">1. 多人协作的问题</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_2-如何记录项目中安装了哪些包" class="sidebar-link">2. 如何记录项目中安装了哪些包</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_3-快速创建-package-json" class="sidebar-link">3. 快速创建 package.json</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_4-dependencies-节点" class="sidebar-link">4. dependencies 节点</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_5-一次性安装所有的包" class="sidebar-link">5. 一次性安装所有的包</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_6-卸载包" class="sidebar-link">6. 卸载包</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_7-devdependencies-节点" class="sidebar-link">7. devDependencies 节点</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_1-为什么下包速度慢" class="sidebar-link">1. 为什么下包速度慢</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_2-淘宝-npm-镜像服务器" class="sidebar-link">2. 淘宝 NPM 镜像服务器</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_3-切换-npm-的下包镜像源" class="sidebar-link">3. 切换 npm 的下包镜像源</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_4-nrm" class="sidebar-link">4. nrm</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_1-项目包" class="sidebar-link">1. 项目包</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_2-全局包" class="sidebar-link">2. 全局包</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_3-i5ting-toc" class="sidebar-link">3. i5ting_toc</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_1-需要实现的功能" class="sidebar-link">1. 需要实现的功能</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_2-初始化包的基本结构" class="sidebar-link">2. 初始化包的基本结构</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_3-初始化-package-json" class="sidebar-link">3. 初始化 package.json</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_4-在-index-js-中定义格式化时间的方法" class="sidebar-link">4. 在 index.js 中定义格式化时间的方法</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_5-在-index-js-中定义转义-html-的方法" class="sidebar-link">5. 在 index.js 中定义转义 HTML 的方法</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_6-在-index-js-中定义还原-html-的方法" class="sidebar-link">6. 在 index.js 中定义还原 HTML 的方法</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_7-将不同的功能进行模块化拆分" class="sidebar-link">7. 将不同的功能进行模块化拆分</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_8-编写包的说明文档" class="sidebar-link">8. 编写包的说明文档</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_1-注册-npm-账号" class="sidebar-link">1. 注册 npm 账号</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_2-登录-npm-账号" class="sidebar-link">2. 登录 npm 账号</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_3-把包发布到-npm-上" class="sidebar-link">3. 把包发布到 npm 上</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_4-删除已发布的包" class="sidebar-link">4. 删除已发布的包</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_1-优先从缓存中加载" class="sidebar-link">1. 优先从缓存中加载</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_2-内置模块的加载机制" class="sidebar-link">2.内置模块的加载机制</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_3-自定义模块的加载机制" class="sidebar-link">3.自定义模块的加载机制</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_4-第三方模块的加载机制" class="sidebar-link">4.第三方模块的加载机制</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_5-目录作为模块" class="sidebar-link">5.目录作为模块</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_1-什么是-express" class="sidebar-link">1. 什么是 Express</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_2-进一步理解-express" class="sidebar-link">2. 进一步理解 Express</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_3-express-能做什么" class="sidebar-link">3. Express 能做什么</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_1-安装" class="sidebar-link">1. 安装</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_2-创建基本的-web-服务器" class="sidebar-link">2. 创建基本的 Web 服务器</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_3-监听-get-请求" class="sidebar-link">3. 监听 GET 请求</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_4-监听-post-请求" class="sidebar-link">4. 监听 POST 请求</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_5-把内容响应给客户端" class="sidebar-link">5. 把内容响应给客户端</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_6-获取-url-中携带的查询参数" class="sidebar-link">6. 获取 URL 中携带的查询参数</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_7-获取-url-中的动态参数" class="sidebar-link">7. 获取 URL 中的动态参数</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_8-托管静态资源" class="sidebar-link">8.托管静态资源</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_1-为什么要使用-nodemon" class="sidebar-link">1. 为什么要使用 nodemon</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_2-安装-nodemon" class="sidebar-link">2. 安装 nodemon</a></li><li class="sidebar-sub-header"><a href="/study/NodeJs/day03/03.html#_3-使用-nodemon" class="sidebar-link">3. 使用 nodemon</a></li></ul></li><li><a href="/study/NodeJs/day04/04.html" class="sidebar-link">NodeJs - day04</a></li><li><a href="/study/NodeJs/day05/05.html" class="sidebar-link">NodeJs - day05</a></li><li><a href="/study/NodeJs/day06/06.html" class="sidebar-link">NodeJs - day06</a></li><li><a href="/study/NodeJs/day07/07.html" class="sidebar-link">NodeJs - day07</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="nodejs-day03"><a href="#nodejs-day03" class="header-anchor">#</a> NodeJs - day03</h1> <h1 id="目标"><a href="#目标" class="header-anchor">#</a> 目标</h1> <ul><li>能够说出 package.json 文件的作用</li> <li>能够知道如何使用 npm 管理项目中的包</li> <li>能够了解模块的加载机制</li> <li>能够知道如何使用 Express 创建基本的 Web 服务器</li> <li>能够知道如何使用 express 托管静态资源</li></ul> <h1 id="包管理配置文件"><a href="#包管理配置文件" class="header-anchor">#</a> <strong>包管理配置文件</strong></h1> <h2 id="概念"><a href="#概念" class="header-anchor">#</a> 概念</h2> <p>npm 规定，在项目根目录中，<strong>必须</strong>提供一个叫做 package.json 的包管理配置文件。用来记录与项目有关的一些配置</p> <p>信息。例如：</p> <ul><li><p>项目的名称、版本号、描述等</p></li> <li><p>项目中都用到了哪些包</p></li> <li><p>哪些包只在开发期间会用到</p></li> <li><p>那些包在开发和部署时都需要用到</p></li></ul> <h2 id="_1-多人协作的问题"><a href="#_1-多人协作的问题" class="header-anchor">#</a> <strong>1. 多人协作的问题</strong></h2> <p><img src="/assets/img/image-20201121184620604.4d189bbd.png" alt="image-20201121184620604"></p> <h2 id="_2-如何记录项目中安装了哪些包"><a href="#_2-如何记录项目中安装了哪些包" class="header-anchor">#</a> <strong>2. 如何记录项目中安装了哪些包</strong></h2> <p>在<strong>项目根目录</strong>中，创建一个叫做 package.json 的配置文件，即可用来记录项目中安装了哪些包。从而方便剔除</p> <p>node_modules 目录之后，在团队成员之间共享项目的源代码。</p> <p><strong>注意</strong>：今后在项目开发中，一定要把 node_modules 文件夹，添加到 .gitignore 忽略文件中。</p> <h2 id="_3-快速创建-package-json"><a href="#_3-快速创建-package-json" class="header-anchor">#</a> <strong>3. 快速创建 package.json</strong></h2> <p>npm 包管理工具提供了一个快捷命令，可以在执行命令时所处的目录中，快速创建 package.json 这个包管理配置文件：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> init -y
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>注意：</p> <p>① 上述命令<strong>只能在英文的目录</strong>下成功运行！所以，项目文件夹的名称一定要<strong>使用英文命名</strong>，不要使用中文，不能出现空格。</p> <p>② 运行 npm install 命令安装包的时候，npm 包管理工具会自动把包的名称和版本号，记录到 package.json 中。</p> <h2 id="_4-dependencies-节点"><a href="#_4-dependencies-节点" class="header-anchor">#</a> <strong>4.</strong> <strong>dependencies</strong> <strong>节点</strong></h2> <p><img src="/assets/img/image-20201121184751725.9ec5f4eb.png" alt="image-20201121184751725"></p> <h2 id="_5-一次性安装所有的包"><a href="#_5-一次性安装所有的包" class="header-anchor">#</a> <strong>5.</strong> <strong>一次性安装所有的包</strong></h2> <p>当我们拿到一个剔除了 node_modules 的项目之后，需要先把所有的包下载到项目中，才能将项目运行起来。</p> <p>否则会报类似于下面的错误</p> <p><img src="/assets/img/image-20201121184827331.0b6d44c6.png" alt="image-20201121184827331"></p> <p>可以运行 npm install 命令（或 npm i）一次性安装所有的依赖包：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span>
<span class="token function">npm</span> i
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_6-卸载包"><a href="#_6-卸载包" class="header-anchor">#</a> <strong>6. 卸载包</strong></h2> <p>可以运行 npm uninstall 命令，来卸载指定的包：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> uninstall 包名
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>注意：npm uninstall 命令执行成功后，会把卸载的包，自动从 package.json 的 dependencies 中移除掉。</p> <h2 id="_7-devdependencies-节点"><a href="#_7-devdependencies-节点" class="header-anchor">#</a> <strong>7.</strong> <strong>devDependencies</strong> <strong>节点</strong></h2> <p>如果某些包<strong>只在项目开发阶段</strong>会用到，在<strong>项目上线之后不会用到</strong>，则建议把这些包记录到 devDependencies 节点中。</p> <p>与之对应的，如果某些包在开发和项目上线之后都需要用到，则建议把这些包记录到 dependencies 节点中。</p> <p>您可以使用如下的命令，将包记录到 devDependencies 节点中：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> i 包名 -D  //简写方式

<span class="token function">npm</span> <span class="token function">install</span> 包名 --save-dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h1 id="解决下包速度慢的问题"><a href="#解决下包速度慢的问题" class="header-anchor">#</a> <strong>解决下包速度慢的问题</strong></h1> <h2 id="_1-为什么下包速度慢"><a href="#_1-为什么下包速度慢" class="header-anchor">#</a> <strong>1. 为什么下包速度慢</strong></h2> <p>在使用 npm 下包的时候，默认从国外的 https://registry.npmjs.org/ 服务器进行下载，此时，网络数据的传输需要经</p> <p>过漫长的海底光缆，因此下包速度会很慢。</p> <p>扩展阅读 - 海底光缆：</p> <ul><li><p>https://baike.baidu.com/item/%E6%B5%B7%E5%BA%95%E5%85%89%E7%BC%86/4107830</p></li> <li><p>https://baike.baidu.com/item/%E4%B8%AD%E7%BE%8E%E6%B5%B7%E5%BA%95%E5%85%89%E7%BC%86/10520363</p></li> <li><p>https://baike.baidu.com/item/APG/23647721?fr=aladdin</p></li></ul> <h2 id="_2-淘宝-npm-镜像服务器"><a href="#_2-淘宝-npm-镜像服务器" class="header-anchor">#</a> <strong>2. 淘宝 NPM 镜像服务器</strong></h2> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 查看当前的下包镜像源</span>
<span class="token function">npm</span> config get registry
<span class="token comment">#设置为淘宝镜像</span>
<span class="token function">npm</span> config <span class="token builtin class-name">set</span> registry https://registry.npm.taobao.org
<span class="token comment">#检查是否设置成功</span>
<span class="token function">npm</span> config get registry
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img src="/assets/img/image-20201121185149935.9fa2cad6.png" alt="image-20201121185149935"></p> <h2 id="_3-切换-npm-的下包镜像源"><a href="#_3-切换-npm-的下包镜像源" class="header-anchor">#</a> <strong>3.</strong> <strong>切换</strong> <strong>npm 的下包镜像源</strong></h2> <p>下包的镜像源，指的就是下包的服务器地址。</p> <p><img src="/assets/img/image-20201121185228589.552767a9.png" alt="image-20201121185228589"></p> <h2 id="_4-nrm"><a href="#_4-nrm" class="header-anchor">#</a> <strong>4. nrm</strong></h2> <p>为了更方便的切换下包的镜像源，我们可以安装 <strong>nrm</strong> 这个小工具，利用 nrm 提供的终端命令，可以快速查看和切换下包的镜像源</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#安装nrm</span>
<span class="token function">npm</span> i nrm -g
<span class="token comment">#查看可用镜像列表</span>
nrm <span class="token function">ls</span>
<span class="token comment">#设置你需要的镜像</span>
nrm use taobao
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h1 id="包的分类"><a href="#包的分类" class="header-anchor">#</a> <strong>包的分类</strong></h1> <p>使用 npm 包管理工具下载的包，共分为两大类，分别是：</p> <ul><li><p>项目包</p></li> <li><p>全局包</p></li></ul> <h2 id="_1-项目包"><a href="#_1-项目包" class="header-anchor">#</a> <strong>1. 项目包</strong></h2> <p>那些被安装到项目的 node_modules 目录中的包，都是项目包。</p> <p>项目包又分为两类，分别是：</p> <ul><li><p>开发依赖包（被记录到 devDependencies 节点中的包，只在开发期间会用到）</p></li> <li><p>核心依赖包（被记录到 dependencies 节点中的包，在开发期间和项目上线之后都会用到）</p></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> i 包名 -D <span class="token comment">#开发依赖包</span>
<span class="token function">npm</span> i 包名    <span class="token comment">#核心依赖包</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_2-全局包"><a href="#_2-全局包" class="header-anchor">#</a> <strong>2. 全局包</strong></h2> <p>在执行 npm install 命令时，如果提供了 -g 参数，则会把包安装为全局包。</p> <p>全局包会被安装到 C:\Users\用户目录\AppData\Roaming\npm\node_modules 目录下</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> i 包名 -g <span class="token comment">#全局安装</span>
<span class="token function">npm</span> uninstall 包名 -g <span class="token comment"># 卸载全局包</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>注意：</p> <p>① 只有工具性质的包，才有全局安装的必要性。因为它们提供了好用的终端命令。</p> <p>② 判断某个包是否需要全局安装后才能使用，可以参考官方提供的使用说明即可</p> <h2 id="_3-i5ting-toc"><a href="#_3-i5ting-toc" class="header-anchor">#</a> <strong>3. i5ting_toc</strong></h2> <p>i5ting_toc 是一个可以把 md 文档转为 html 页面的小工具，使用步骤如下：</p> <p><img src="/assets/img/image-20201121185820681.4ff0d60d.png" alt="image-20201121185820681"></p> <h1 id="规范的包结构"><a href="#规范的包结构" class="header-anchor">#</a> <strong>规范的包结构</strong></h1> <p>在清楚了包的概念、以及如何下载和使用包之后，接下来，我们深入了解一下包的内部结构。</p> <p>一个规范的包，它的组成结构，必须符合以下 3 点要求：</p> <p><strong>① 包必须以单独的目录而存在</strong></p> <p><strong>② 包的顶级目录下要必须包含 package.json 这个包管理配置文件</strong></p> <p><strong>③ package.json 中必须包含 name，version，main 这三个属性，分别代表包的名字、版本号、包的入口。</strong></p> <p>注意：以上 3 点要求是一个规范的包结构必须遵守的格式，关于更多的约束，可以参考如下网址：</p> <p>https://yarnpkg.com/zh-Hans/docs/package-json</p> <h1 id="开发属于自己的包"><a href="#开发属于自己的包" class="header-anchor">#</a> <strong>开发属于自己的包</strong></h1> <h2 id="_1-需要实现的功能"><a href="#_1-需要实现的功能" class="header-anchor">#</a> <strong>1. 需要实现的功能</strong></h2> <p><strong>① 格式化日期</strong></p> <p><strong>② 转义 HTML 中的特殊字符</strong></p> <p><strong>③ 还原 HTML 中的特殊字符</strong></p> <h3 id="_1-1-需要实现的功能"><a href="#_1-1-需要实现的功能" class="header-anchor">#</a> 1.1.<strong>需要实现的功能</strong></h3> <p><img src="/assets/img/image-20201121193304397.3a14c419.png" alt="image-20201121193304397"></p> <h3 id="_1-2-需要实现的功能"><a href="#_1-2-需要实现的功能" class="header-anchor">#</a> <strong>1.2. 需要实现的功能</strong></h3> <p><img src="/assets/img/image-20201121193348992.50c010cc.png" alt="image-20201121193348992"></p> <h3 id="_1-3-需要实现的功能"><a href="#_1-3-需要实现的功能" class="header-anchor">#</a> 1.3. 需要实现的功能</h3> <p><img src="/assets/img/image-20201121193417100.6997803b.png" alt="image-20201121193417100"></p> <h2 id="_2-初始化包的基本结构"><a href="#_2-初始化包的基本结构" class="header-anchor">#</a> <strong>2. 初始化包的基本结构</strong></h2> <p>① 新建 itheima-tools 文件夹，作为包的根目录</p> <p>② 在 itheima-tools 文件夹中，新建如下三个文件：</p> <ul><li><p>package.json （包管理配置文件）</p></li> <li><p>index.js （包的入口文件）</p></li> <li><p>README.md （包的说明文档）</p></li></ul> <h2 id="_3-初始化-package-json"><a href="#_3-初始化-package-json" class="header-anchor">#</a> <strong>3. 初始化 package.json</strong></h2> <p><img src="/assets/img/image-20201121193557529.400fc392.png" alt="image-20201121193557529"></p> <h2 id="_4-在-index-js-中定义格式化时间的方法"><a href="#_4-在-index-js-中定义格式化时间的方法" class="header-anchor">#</a> <strong>4. 在 index.js 中定义格式化时间的方法</strong></h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 定义格式化时间的函数</span>
<span class="token keyword">function</span> <span class="token function">dateFormat</span><span class="token punctuation">(</span><span class="token parameter">dateStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> dt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>dateStr<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> y <span class="token operator">=</span> dt<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> m <span class="token operator">=</span> <span class="token function">padZero</span><span class="token punctuation">(</span>dt<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> d <span class="token operator">=</span> <span class="token function">padZero</span><span class="token punctuation">(</span>dt<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> hh <span class="token operator">=</span> <span class="token function">padZero</span><span class="token punctuation">(</span>dt<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> mm <span class="token operator">=</span> <span class="token function">padZero</span><span class="token punctuation">(</span>dt<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> ss <span class="token operator">=</span> <span class="token function">padZero</span><span class="token punctuation">(</span>dt<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>y<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>m<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>d<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>hh<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mm<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ss<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 定义一个补零的函数</span>
<span class="token keyword">function</span> <span class="token function">padZero</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> n <span class="token operator">&gt;</span> <span class="token number">9</span> <span class="token operator">?</span> n <span class="token operator">:</span> <span class="token string">&quot;0&quot;</span> <span class="token operator">+</span> n<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  dateFormat<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="_5-在-index-js-中定义转义-html-的方法"><a href="#_5-在-index-js-中定义转义-html-的方法" class="header-anchor">#</a> <strong>5. 在 index.js 中定义转义 HTML 的方法</strong></h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 定义转义 HTML 字符的函数</span>
<span class="token keyword">function</span> <span class="token function">htmlEscape</span><span class="token punctuation">(</span><span class="token parameter">htmlstr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> htmlstr<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;|&gt;|&quot;|&amp;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">match</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>match<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">&quot;&lt;&quot;</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token string">&quot;&amp;lt;&quot;</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;&gt;&quot;</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token string">&quot;&amp;gt;&quot;</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">'&quot;'</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token string">&quot;&amp;quot;&quot;</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;&amp;&quot;</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token string">&quot;&amp;amp;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="_6-在-index-js-中定义还原-html-的方法"><a href="#_6-在-index-js-中定义还原-html-的方法" class="header-anchor">#</a> <strong>6. 在 index.js 中定义还原 HTML 的方法</strong></h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 定义还原 HTML 字符串的函数</span>
<span class="token keyword">function</span> <span class="token function">htmlUnEscape</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&amp;lt;|&amp;gt;|&amp;quot;|&amp;amp;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">match</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>match<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">&quot;&amp;lt;&quot;</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token string">&quot;&lt;&quot;</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;&amp;gt;&quot;</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token string">&quot;&gt;&quot;</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;&amp;quot;&quot;</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token string">'&quot;'</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;&amp;amp;&quot;</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token string">&quot;&amp;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="_7-将不同的功能进行模块化拆分"><a href="#_7-将不同的功能进行模块化拆分" class="header-anchor">#</a> <strong>7. 将不同的功能进行模块化拆分</strong></h2> <p><strong>① 将格式化时间的功能，拆分到 src -&gt; dateFormat.js 中</strong></p> <p><strong>② 将处理 HTML 字符串的功能，拆分到 src -&gt; htmlEscape.js 中</strong></p> <p><strong>③ 在 index.js 中，导入两个模块，得到需要向外共享的方法</strong></p> <p><strong>④ 在 index.js 中，使用 module.exports 把对应的方法共享出去</strong></p> <h2 id="_8-编写包的说明文档"><a href="#_8-编写包的说明文档" class="header-anchor">#</a> <strong>8. 编写包的说明文档</strong></h2> <p>包根目录中的 README.md 文件，是包的使用说明文档。通过它，我们可以事先把包的使用说明，以 markdown 的</p> <p>格式写出来，方便用户参考。</p> <p>README 文件中具体写什么内容，没有强制性的要求；只要能够清晰地把包的作用、用法、注意事项等描述清楚即可。</p> <p>我们所创建的这个包的 README.md 文档中，会包含以下 6 项内容：</p> <p>安装方式、导入方式、格式化时间、转义 HTML 中的特殊字符、还原 HTML 中的特殊字符、开源协议</p> <h1 id="发布包"><a href="#发布包" class="header-anchor">#</a> <strong>发布包</strong></h1> <h2 id="_1-注册-npm-账号"><a href="#_1-注册-npm-账号" class="header-anchor">#</a> <strong>1. 注册 npm 账号</strong></h2> <p><strong>① 访问 https://www.npmjs.com/ 网站，点击 sign up 按钮，进入注册用户界面</strong></p> <p><strong>② 填写账号相关的信息：Full Name、Public Email、Username、Password</strong></p> <p><strong>③ 点击 Create an Account 按钮，注册账号</strong></p> <p><strong>④ 登录邮箱，点击验证链接，进行账号的验证</strong></p> <h2 id="_2-登录-npm-账号"><a href="#_2-登录-npm-账号" class="header-anchor">#</a> <strong>2. 登录 npm 账号</strong></h2> <p>npm 账号注册完成后，可以在终端中执行 npm login 命令，依次输入用户名、密码、邮箱后，即可登录成功。</p> <p><img src="/assets/img/image-20201121194201120.32d0bede.png" alt="image-20201121194201120"></p> <h2 id="_3-把包发布到-npm-上"><a href="#_3-把包发布到-npm-上" class="header-anchor">#</a> <strong>3. 把包发布到 npm 上</strong></h2> <p>将终端切换到包的根目录之后，运行 <strong>npm publish</strong> 命令，即可将包发布到 npm 上（注意：包名不能雷同）。</p> <p><img src="/assets/img/image-20201121194231859.8c44fe70.png" alt="image-20201121194231859"></p> <h2 id="_4-删除已发布的包"><a href="#_4-删除已发布的包" class="header-anchor">#</a> <strong>4. 删除已发布的包</strong></h2> <p>运行 <strong>npm unpublish 包名 --force</strong> 命令，即可从 npm 删除已发布的包。</p> <p><img src="/assets/img/image-20201121194256037.39bf7c9d.png" alt="image-20201121194256037"></p> <p>注意：</p> <p>① npm unpublish 命令只能删除 72 小时以内发布的包</p> <p>② npm unpublish 删除的包，在 24 小时内不允许重复发布</p> <p>③ 发布包的时候要慎重，尽量不要往 npm 上发布没有意义的包！</p> <h1 id="模块的加载机制"><a href="#模块的加载机制" class="header-anchor">#</a> <strong>模块的加载机制</strong></h1> <h2 id="_1-优先从缓存中加载"><a href="#_1-优先从缓存中加载" class="header-anchor">#</a> 1. <strong>优先从缓存中加载</strong></h2> <p><strong>模块在第一次加载后会被缓存</strong>。 这也意味着多次调用 require() 不会导致模块的代码被执行多次。</p> <p>注意：不论是内置模块、用户自定义模块、还是第三方模块，它们都会优先从缓存中加载，从而提高模块的加载效率。</p> <h2 id="_2-内置模块的加载机制"><a href="#_2-内置模块的加载机制" class="header-anchor">#</a> 2.内置模块的加载机制</h2> <p>内置模块是由 Node.js 官方提供的模块，内置模块的加载优先级最高。</p> <p>例如，require('fs') 始终返回内置的 fs 模块，即使在 node_modules 目录下有名字相同的包也叫做 fs</p> <h2 id="_3-自定义模块的加载机制"><a href="#_3-自定义模块的加载机制" class="header-anchor">#</a> <strong>3.自定义模块的加载机制</strong></h2> <p>使用 require() 加载自定义模块时，必须指定以 ./ 或 ../ 开头的路径标识符。在加载自定义模块时，如果没有指定 ./ 或 ../</p> <p>这样的路径标识符，则 node 会把它当作内置模块或第三方模块进行加载。</p> <p>同时，在使用 require() 导入自定义模块时，如果省略了文件的扩展名，则 Node.js 会按顺序分别尝试加载以下的文件：</p> <p><strong>① 按照确切的文件名进行加载</strong></p> <p><strong>② 补全 .js 扩展名进行加载</strong></p> <p><strong>③ 补全 .json 扩展名进行加载</strong></p> <p><strong>④ 补全 .node 扩展名进行加载</strong></p> <p><strong>⑤ 加载失败，终端报错</strong></p> <h2 id="_4-第三方模块的加载机制"><a href="#_4-第三方模块的加载机制" class="header-anchor">#</a> 4.<strong>第三方模块的加载机制</strong></h2> <p>如果传递给 require() 的模块标识符不是一个内置模块，也没有以 ‘./’ 或 ‘../’ 开头，则 Node.js 会从当前模块的父</p> <p>目录开始，尝试从 /node_modules 文件夹中加载第三方模块。</p> <p><strong>如果没有找到对应的第三方模块，则移动到再上一层父目录中，进行加载，直到文件系统的根目录。</strong></p> <p>例如，假设在 'C:\Users\itheima\project\foo.js' 文件里调用了 require('tools')，则 Node.js 会按以下顺序查找：</p> <p><strong>① C:\Users\itheima\project\node_modules\tools</strong></p> <p><strong>② C:\Users\itheima\node_modules\tools</strong></p> <p><strong>③ C:\Users\node_modules\tools</strong></p> <p><strong>④ C:\node_modules\tools</strong></p> <h2 id="_5-目录作为模块"><a href="#_5-目录作为模块" class="header-anchor">#</a> 5.<strong>目录作为模块</strong></h2> <p>当把目录作为模块标识符，传递给 require() 进行加载的时候，有三种加载方式：</p> <p><strong>① 在被加载的目录下查找一个叫做 package.json 的文件，并寻找 main 属性，作为 require() 加载的入口</strong></p> <p><strong>② 如果目录里没有 package.json 文件，或者 main 入口不存在或无法解析，则 Node.js 将会试图加载目录下的 index.js 文件。</strong></p> <p><strong>③ 如果以上两步都失败了，则 Node.js 会在终端打印错误消息，报告模块的缺失：Error: Cannot find module 'xxx‘</strong></p> <h1 id="express-简介"><a href="#express-简介" class="header-anchor">#</a> Express 简介</h1> <h2 id="_1-什么是-express"><a href="#_1-什么是-express" class="header-anchor">#</a> 1. 什么是 Express</h2> <p>官方给出的概念：<strong>Express 是基于 Node.js 平台，快速、开放、极简的 Web 开发框架。</strong>
通俗的理解：Express 的作用和 Node.js 内置的 http 模块类似，是专门用来创建 Web 服务器的。
Express 的本质：就是一个 npm 上的第三方包，提供了快速创建 Web 服务器的便捷方法。
Express 的中文官网： http://www.expressjs.com.cn/</p> <h2 id="_2-进一步理解-express"><a href="#_2-进一步理解-express" class="header-anchor">#</a> 2. 进一步理解 Express</h2> <p>思考：不使用 Express 能否创建 Web 服务器？
答案：能，使用 Node.js 提供的原生 http 模块即可。
思考：既生瑜何生亮（有了 http 内置模块，为什么还有用 Express）？
答案：http 内置模块用起来很复杂，开发效率低；Express 是基于内置的 http 模块进一步封装出来的，能够极大的提高开发效率。
思考：http 内置模块与 Express 是什么关系？
答案：类似于浏览器中 Web API 和 jQuery 的关系。后者是基于前者进一步封装出来的。</p> <h2 id="_3-express-能做什么"><a href="#_3-express-能做什么" class="header-anchor">#</a> 3. Express 能做什么</h2> <p>对于前端程序员来说，最常见的两种服务器，分别是：</p> <ul><li>Web 网站服务器：专门对外提供 Web 网页资源的服务器。</li> <li>API 接口服务器：专门对外提供 API 接口的服务器。
使用 Express，我们可以方便、快速的创建 Web 网站的服务器或 API 接口的服务器。</li></ul> <h1 id="express-的基本使用"><a href="#express-的基本使用" class="header-anchor">#</a> Express 的基本使用</h1> <h2 id="_1-安装"><a href="#_1-安装" class="header-anchor">#</a> 1. 安装</h2> <p>在项目所处的目录中，运行如下的终端命令，即可将 express 安装到项目中使用：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> i express@4.17.1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_2-创建基本的-web-服务器"><a href="#_2-创建基本的-web-服务器" class="header-anchor">#</a> 2. 创建基本的 Web 服务器</h2> <p><img src="/assets/img/image-20201122213922140.b6c82cdd.png" alt="image-20201122213922140"></p> <h2 id="_3-监听-get-请求"><a href="#_3-监听-get-请求" class="header-anchor">#</a> 3. 监听 GET 请求</h2> <p>通过 app.get() 方法，可以监听客户端的 GET 请求，具体的语法格式如下：</p> <p><img src="/assets/img/image-20201122214006119.92bb471f.png" alt="image-20201122214006119"></p> <h2 id="_4-监听-post-请求"><a href="#_4-监听-post-请求" class="header-anchor">#</a> 4. 监听 POST 请求</h2> <p>通过 app.post() 方法，可以监听客户端的 POST 请求，具体的语法格式如下：</p> <p><img src="/assets/img/image-20201122214047072.13d4d0c3.png" alt="image-20201122214047072"></p> <h2 id="_5-把内容响应给客户端"><a href="#_5-把内容响应给客户端" class="header-anchor">#</a> 5. 把内容响应给客户端</h2> <p>通过 res.send() 方法，可以把处理好的内容，发送给客户端：</p> <p><img src="/assets/img/image-20201122214122771.9852998d.png" alt="image-20201122214122771"></p> <h2 id="_6-获取-url-中携带的查询参数"><a href="#_6-获取-url-中携带的查询参数" class="header-anchor">#</a> 6. 获取 URL 中携带的查询参数</h2> <p>通过 req.query 对象，可以访问到客户端通过查询字符串的形式，发送到服务器的参数：</p> <p><img src="/assets/img/image-20201122214151554.54e94560.png" alt="image-20201122214151554"></p> <h2 id="_7-获取-url-中的动态参数"><a href="#_7-获取-url-中的动态参数" class="header-anchor">#</a> 7. 获取 URL 中的动态参数</h2> <p>通过 req.params 对象，可以访问到 URL 中，通过 : 匹配到的动态参数：<img src="/assets/img/image-20201122214221838.b06e53a8.png" alt="image-20201122214221838"></p> <h2 id="_8-托管静态资源"><a href="#_8-托管静态资源" class="header-anchor">#</a> 8.托管静态资源</h2> <h3 id="_8-1-express-static"><a href="#_8-1-express-static" class="header-anchor">#</a> 8.1 express.static()</h3> <p>express 提供了一个非常好用的函数，叫做 express.static()，通过它，我们可以非常方便地创建一个静态资源服务器， 例如，通过如下代码就可以将 public 目录下的图片、CSS 文件、JavaScript 文件对外开放访问了：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">&quot;public&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>现在，你就可以访问 public 目录中的所有文件了：
http://localhost:3000/./images/bg.jpg
http://localhost:3000/css/style.css
http://localhost:3000/js/login.js
<strong>注意：Express 在指定的静态目录中查找文件，并对外提供资源的访问路径。 因此，存放静态文件的目录名不会出现在 URL 中。</strong></p> <h3 id="_8-2-托管多个静态资源目录"><a href="#_8-2-托管多个静态资源目录" class="header-anchor">#</a> 8.2 托管多个静态资源目录</h3> <p>如果要托管多个静态资源目录，请多次调用 express.static() 函数：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">&quot;public&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">&quot;files&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>访问静态资源文件时，express.static() 函数会根据目录的添加顺序查找所需的文件。</p> <h3 id="_8-3-挂载路径前缀"><a href="#_8-3-挂载路径前缀" class="header-anchor">#</a> 8.3. 挂载路径前缀</h3> <p>如果希望在托管的静态资源访问路径之前，挂载路径前缀，则可以使用如下的方式：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&quot;/public&quot;</span><span class="token punctuation">,</span> express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">&quot;public&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>现在，你就可以通过带有 /public 前缀地址来访问 public 目录中的文件了：
http://localhost:3000/public/./images/kitten.jpg
http://localhost:3000/public/css/style.css
http://localhost:3000/public/js/app.js</p> <h1 id="nodemon"><a href="#nodemon" class="header-anchor">#</a> nodemon</h1> <h2 id="_1-为什么要使用-nodemon"><a href="#_1-为什么要使用-nodemon" class="header-anchor">#</a> 1. 为什么要使用 nodemon</h2> <p>在编写调试 Node.js 项目的时候，如果修改了项目的代码，则需要频繁的手动 close 掉，然后再重新启动，非常繁琐。
现在，我们可以使用 nodemon（https://www.npmjs.com/package/nodemon）这个工具，它能够监听项目文件 的变动，当代码被修改后，nodemon 会自动帮我们重启项目，极大方便了开发和调试。</p> <h2 id="_2-安装-nodemon"><a href="#_2-安装-nodemon" class="header-anchor">#</a> 2. 安装 nodemon</h2> <p>在终端中，运行如下命令，即可将 nodemon 安装为全局可用的工具：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> -g nodemon
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_3-使用-nodemon"><a href="#_3-使用-nodemon" class="header-anchor">#</a> 3. 使用 nodemon</h2> <p>当基于 Node.js 编写了一个网站应用的时候，传统的方式，是运行 node app.js 命令，来启动项目。这样做的坏处是： 代码被修改之后，需要手动重启项目。
现在，我们可以将 node 命令替换为 nodemon 命令，使用 nodemon app.js 来启动项目。这样做的好处是：代码 被修改之后，会被 nodemon 监听到，从而实现自动重启项目的效果。</p> <p><img src="/assets/img/image-20201122214813079.464f58ea.png" alt="image-20201122214813079"></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/8/2021, 5:36:31 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/study/NodeJs/day02/02.html" class="prev">
        NodeJs - day02
      </a></span> <span class="next"><a href="/study/NodeJs/day04/04.html">
        NodeJs - day04
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.e7ac4fdd.js" defer></script><script src="/assets/js/2.5013479a.js" defer></script><script src="/assets/js/17.685c7f62.js" defer></script>
  </body>
</html>
