<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>NodeJs - day01 | 前端笔记</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="在线笔记">
    
    <link rel="preload" href="/zz-web/assets/css/0.styles.c0bfc3b1.css" as="style"><link rel="preload" href="/zz-web/assets/js/app.083f945b.js" as="script"><link rel="preload" href="/zz-web/assets/js/2.f2240049.js" as="script"><link rel="preload" href="/zz-web/assets/js/29.872a74a7.js" as="script"><link rel="prefetch" href="/zz-web/assets/js/10.d5312b28.js"><link rel="prefetch" href="/zz-web/assets/js/11.2b6aa850.js"><link rel="prefetch" href="/zz-web/assets/js/12.2ab2992b.js"><link rel="prefetch" href="/zz-web/assets/js/13.edf2fe2f.js"><link rel="prefetch" href="/zz-web/assets/js/14.9f97b9d2.js"><link rel="prefetch" href="/zz-web/assets/js/15.0493a36c.js"><link rel="prefetch" href="/zz-web/assets/js/16.03213685.js"><link rel="prefetch" href="/zz-web/assets/js/17.73d68c4e.js"><link rel="prefetch" href="/zz-web/assets/js/18.12075e8a.js"><link rel="prefetch" href="/zz-web/assets/js/19.498e8181.js"><link rel="prefetch" href="/zz-web/assets/js/20.f2ff5235.js"><link rel="prefetch" href="/zz-web/assets/js/21.91a2fc69.js"><link rel="prefetch" href="/zz-web/assets/js/22.a727aa87.js"><link rel="prefetch" href="/zz-web/assets/js/23.380e54c9.js"><link rel="prefetch" href="/zz-web/assets/js/24.c12d12df.js"><link rel="prefetch" href="/zz-web/assets/js/25.8f557342.js"><link rel="prefetch" href="/zz-web/assets/js/26.b4ebb45d.js"><link rel="prefetch" href="/zz-web/assets/js/27.1a9df948.js"><link rel="prefetch" href="/zz-web/assets/js/28.58b2b7c8.js"><link rel="prefetch" href="/zz-web/assets/js/3.96bb5801.js"><link rel="prefetch" href="/zz-web/assets/js/30.e767d85b.js"><link rel="prefetch" href="/zz-web/assets/js/31.2a66bb00.js"><link rel="prefetch" href="/zz-web/assets/js/32.4b3ae917.js"><link rel="prefetch" href="/zz-web/assets/js/33.a0ee48f3.js"><link rel="prefetch" href="/zz-web/assets/js/34.b1e111ac.js"><link rel="prefetch" href="/zz-web/assets/js/35.70b67615.js"><link rel="prefetch" href="/zz-web/assets/js/36.c8a1f895.js"><link rel="prefetch" href="/zz-web/assets/js/37.7830b613.js"><link rel="prefetch" href="/zz-web/assets/js/38.aaaab44a.js"><link rel="prefetch" href="/zz-web/assets/js/39.5fe7a1ec.js"><link rel="prefetch" href="/zz-web/assets/js/4.c3d1ea14.js"><link rel="prefetch" href="/zz-web/assets/js/40.54e98467.js"><link rel="prefetch" href="/zz-web/assets/js/41.4dc705c1.js"><link rel="prefetch" href="/zz-web/assets/js/42.9c9fa6be.js"><link rel="prefetch" href="/zz-web/assets/js/43.2be21763.js"><link rel="prefetch" href="/zz-web/assets/js/44.e1c509f1.js"><link rel="prefetch" href="/zz-web/assets/js/45.3d0ca188.js"><link rel="prefetch" href="/zz-web/assets/js/46.c08d3f05.js"><link rel="prefetch" href="/zz-web/assets/js/47.5b9b3830.js"><link rel="prefetch" href="/zz-web/assets/js/48.8dd0953b.js"><link rel="prefetch" href="/zz-web/assets/js/49.fa9cde16.js"><link rel="prefetch" href="/zz-web/assets/js/5.095b1679.js"><link rel="prefetch" href="/zz-web/assets/js/50.dd3e5c49.js"><link rel="prefetch" href="/zz-web/assets/js/51.e93f43fb.js"><link rel="prefetch" href="/zz-web/assets/js/52.00aba65d.js"><link rel="prefetch" href="/zz-web/assets/js/53.2e7de842.js"><link rel="prefetch" href="/zz-web/assets/js/54.9624d966.js"><link rel="prefetch" href="/zz-web/assets/js/6.dd5c96ae.js"><link rel="prefetch" href="/zz-web/assets/js/7.29dbb4cd.js"><link rel="prefetch" href="/zz-web/assets/js/8.dc4bd71f.js"><link rel="prefetch" href="/zz-web/assets/js/9.81b641cc.js">
    <link rel="stylesheet" href="/zz-web/assets/css/0.styles.c0bfc3b1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/zz-web/" class="home-link router-link-active"><img src="./logo.png" alt="前端笔记" class="logo"> <span class="site-name can-hide">前端笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/zz-web/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="课程笔记" class="dropdown-title"><span class="title">课程笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="课程笔记" class="mobile-dropdown-title"><span class="title">课程笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          课程笔记
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/zz-web/study/webAPI/day01/01.html" class="nav-link">
  WebApi
</a></li><li class="dropdown-subitem"><a href="/zz-web/study/JS基础/js-day01/01.html" class="nav-link">
  JS基础
</a></li><li class="dropdown-subitem"><a href="/zz-web/study/Jquery/day01/01.html" class="nav-link">
  Jquery
</a></li><li class="dropdown-subitem"><a href="/zz-web/study/Eacharts/day01/01.html" class="nav-link">
  数据可视化
</a></li><li class="dropdown-subitem"><a href="/zz-web/study/Js高级/day01/JavaScript高级第01天笔记.html" class="nav-link">
  JS高级
</a></li><li class="dropdown-subitem"><a href="/zz-web/study/AJAX/day01/01.html" class="nav-link">
  Ajax
</a></li><li class="dropdown-subitem"><a href="/zz-web/study/Git/day01/01.html" class="nav-link">
  Git
</a></li><li class="dropdown-subitem"><a href="/zz-web/study/BigEvent/day01/01.html" class="nav-link">
  大事件
</a></li><li class="dropdown-subitem"><a href="/zz-web/study/NodeJs/day01/01.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  NodeJs
</a></li><li class="dropdown-subitem"><a href="/zz-web/study/Vue基础/Day01/01.html" class="nav-link">
  Vue基础
</a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/zz-web/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="课程笔记" class="dropdown-title"><span class="title">课程笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="课程笔记" class="mobile-dropdown-title"><span class="title">课程笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          课程笔记
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/zz-web/study/webAPI/day01/01.html" class="nav-link">
  WebApi
</a></li><li class="dropdown-subitem"><a href="/zz-web/study/JS基础/js-day01/01.html" class="nav-link">
  JS基础
</a></li><li class="dropdown-subitem"><a href="/zz-web/study/Jquery/day01/01.html" class="nav-link">
  Jquery
</a></li><li class="dropdown-subitem"><a href="/zz-web/study/Eacharts/day01/01.html" class="nav-link">
  数据可视化
</a></li><li class="dropdown-subitem"><a href="/zz-web/study/Js高级/day01/JavaScript高级第01天笔记.html" class="nav-link">
  JS高级
</a></li><li class="dropdown-subitem"><a href="/zz-web/study/AJAX/day01/01.html" class="nav-link">
  Ajax
</a></li><li class="dropdown-subitem"><a href="/zz-web/study/Git/day01/01.html" class="nav-link">
  Git
</a></li><li class="dropdown-subitem"><a href="/zz-web/study/BigEvent/day01/01.html" class="nav-link">
  大事件
</a></li><li class="dropdown-subitem"><a href="/zz-web/study/NodeJs/day01/01.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  NodeJs
</a></li><li class="dropdown-subitem"><a href="/zz-web/study/Vue基础/Day01/01.html" class="nav-link">
  Vue基础
</a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/zz-web/study/NodeJs/day01/01.html" aria-current="page" class="active sidebar-link">NodeJs - day01</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zz-web/study/NodeJs/day01/01.html#_1-什么是-node-js" class="sidebar-link">1.什么是 Node.js</a></li><li class="sidebar-sub-header"><a href="/zz-web/study/NodeJs/day01/01.html#_2-node-js-中的-javascript-运行环境" class="sidebar-link">2. Node.js 中的 JavaScript 运行环境</a></li><li class="sidebar-sub-header"><a href="/zz-web/study/NodeJs/day01/01.html#_3-node-js-可以做什么" class="sidebar-link">3. Node.js 可以做什么</a></li><li class="sidebar-sub-header"><a href="/zz-web/study/NodeJs/day01/01.html#_4-node-js-怎么学" class="sidebar-link">4.Node.js 怎么学</a></li><li class="sidebar-sub-header"><a href="/zz-web/study/NodeJs/day01/01.html#_5-node-js-环境的安装" class="sidebar-link">5. Node.js 环境的安装</a></li><li class="sidebar-sub-header"><a href="/zz-web/study/NodeJs/day01/01.html#_6-node-js-环境的安装" class="sidebar-link">6. Node.js 环境的安装</a></li><li class="sidebar-sub-header"><a href="/zz-web/study/NodeJs/day01/01.html#_7-查看已安装的-node-js-的版本号" class="sidebar-link">7. 查看已安装的 Node.js 的版本号</a></li><li class="sidebar-sub-header"><a href="/zz-web/study/NodeJs/day01/01.html#_8-什么是终端" class="sidebar-link">8. 什么是终端</a></li><li class="sidebar-sub-header"><a href="/zz-web/study/NodeJs/day01/01.html#_9-在-node-js-环境中执行-javascript-代码" class="sidebar-link">9. 在 Node.js 环境中执行 JavaScript 代码</a></li><li class="sidebar-sub-header"><a href="/zz-web/study/NodeJs/day01/01.html#_1-什么是-fs-文件系统模块" class="sidebar-link">1.什么是 fs 文件系统模块</a></li><li class="sidebar-sub-header"><a href="/zz-web/study/NodeJs/day01/01.html#_2-读取指定文件中的内容" class="sidebar-link">2.读取指定文件中的内容</a></li><li class="sidebar-sub-header"><a href="/zz-web/study/NodeJs/day01/01.html#_3-向指定的文件中写入内容" class="sidebar-link">3.向指定的文件中写入内容</a></li><li class="sidebar-sub-header"><a href="/zz-web/study/NodeJs/day01/01.html#_4-练习-考试成绩整理" class="sidebar-link">4.练习 - 考试成绩整理</a></li><li class="sidebar-sub-header"><a href="/zz-web/study/NodeJs/day01/01.html#_5-fs-模块-路径动态拼接的问题" class="sidebar-link">5.fs 模块 - 路径动态拼接的问题</a></li><li class="sidebar-sub-header"><a href="/zz-web/study/NodeJs/day01/01.html#_1-什么是-path-路径模块" class="sidebar-link">1. 什么是 path 路径模块</a></li><li class="sidebar-sub-header"><a href="/zz-web/study/NodeJs/day01/01.html#_2-路径拼接" class="sidebar-link">2. 路径拼接</a></li><li class="sidebar-sub-header"><a href="/zz-web/study/NodeJs/day01/01.html#_3-获取路径中的文件名" class="sidebar-link">3.获取路径中的文件名</a></li><li class="sidebar-sub-header"><a href="/zz-web/study/NodeJs/day01/01.html#_4-获取路径中的文件扩展名" class="sidebar-link">4. 获取路径中的文件扩展名</a></li><li class="sidebar-sub-header"><a href="/zz-web/study/NodeJs/day01/01.html#_1-案例要实现的功能" class="sidebar-link">1. 案例要实现的功能</a></li><li class="sidebar-sub-header"><a href="/zz-web/study/NodeJs/day01/01.html#_2-案例的实现步骤" class="sidebar-link">2.案例的实现步骤</a></li><li class="sidebar-sub-header"><a href="/zz-web/study/NodeJs/day01/01.html#_3-步骤-1-导入需要的模块并创建正则表达式" class="sidebar-link">3. 步骤 1 - 导入需要的模块并创建正则表达式</a></li><li class="sidebar-sub-header"><a href="/zz-web/study/NodeJs/day01/01.html#_4-步骤-2-使用-fs-模块读取需要被处理的-html-文件" class="sidebar-link">4. 步骤 2 - 使用 fs 模块读取需要被处理的 html 文件</a></li><li class="sidebar-sub-header"><a href="/zz-web/study/NodeJs/day01/01.html#_5-步骤-3-自定义-resolvecss-方法" class="sidebar-link">5.步骤 3 – 自定义 resolveCSS 方法</a></li><li class="sidebar-sub-header"><a href="/zz-web/study/NodeJs/day01/01.html#_6-步骤-4-自定义-resolvejs-方法" class="sidebar-link">6. 步骤 4 – 自定义 resolveJS 方法</a></li><li class="sidebar-sub-header"><a href="/zz-web/study/NodeJs/day01/01.html#_7-步骤-5-自定义-resolvehtml-方法" class="sidebar-link">7. 步骤 5 – 自定义 resolveHTML 方法</a></li><li class="sidebar-sub-header"><a href="/zz-web/study/NodeJs/day01/01.html#_8-案例的两个注意点" class="sidebar-link">8.案例的两个注意点</a></li><li class="sidebar-sub-header"><a href="/zz-web/study/NodeJs/day01/01.html#_9-完整实例代码" class="sidebar-link">9.完整实例代码</a></li></ul></li><li><a href="/zz-web/study/NodeJs/day02/02.html" class="sidebar-link">NodeJs - day02</a></li><li><a href="/zz-web/study/NodeJs/day03/03.html" class="sidebar-link">NodeJs - day03</a></li><li><a href="/zz-web/study/NodeJs/day04/04.html" class="sidebar-link">NodeJs - day04</a></li><li><a href="/zz-web/study/NodeJs/day05/05.html" class="sidebar-link">NodeJs - day05</a></li><li><a href="/zz-web/study/NodeJs/day06/06.html" class="sidebar-link">NodeJs - day06</a></li><li><a href="/zz-web/study/NodeJs/day07/07.html" class="sidebar-link">NodeJs - day07</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="nodejs-day01"><a href="#nodejs-day01" class="header-anchor">#</a> NodeJs - day01</h1> <h1 id="目标"><a href="#目标" class="header-anchor">#</a> 目标</h1> <p>◆ 能够知道什么是 Node.js</p> <p>◆ 能够知道 Node.js 可以做什么</p> <p>◆ 能够说出 Node.js 中的 JavaScript 的组成部分</p> <p>◆ 能够使用 fs 模块读写操作文件</p> <p>◆ 能够使用 path 模块处理路径</p> <h1 id="node-js-简介"><a href="#node-js-简介" class="header-anchor">#</a> <strong>Node.js 简介</strong></h1> <h2 id="_1-什么是-node-js"><a href="#_1-什么是-node-js" class="header-anchor">#</a> 1.<strong>什么是 Node.js</strong></h2> <p><strong>Node.js®</strong> is a JavaScript runtime built on Chrome's V8 JavaScript engine.</p> <p>Node.js 是一个基于 <strong>Chrome V8</strong> 引擎的 JavaScript 运行环境。</p> <p><strong>Node.js 的官网地址</strong>： https://nodejs.org/zh-cn/</p> <h2 id="_2-node-js-中的-javascript-运行环境"><a href="#_2-node-js-中的-javascript-运行环境" class="header-anchor">#</a> **2. **Node.js 中的 JavaScript 运行环境</h2> <p><img src="/zz-web/assets/img/image-20201116185141381.a9b5a62e.png" alt="image-20201116185141381"></p> <h2 id="_3-node-js-可以做什么"><a href="#_3-node-js-可以做什么" class="header-anchor">#</a> <strong>3. Node.js 可以做什么</strong></h2> <p>Node.js 作为一个 JavaScript 的运行环境，仅仅提供了基础的功能和 API。然而，基于 Node.js 提供的这些基础能，很多强大的工具和框架如雨后春笋，层出不穷，所以学会了 Node.js ，可以让前端程序员胜任更多的工作和岗位：</p> <p><strong>①</strong> 基于 Express 框架（http://www.expressjs.com.cn/），可以快速构建 Web 应用</p> <p><strong>②</strong> 基于 Electron 框架（https://electronjs.org/），可以构建跨平台的桌面应用</p> <p><strong>③</strong> 基于 restify 框架（http://restify.com/），可以快速构建 API 接口项目</p> <p><strong>④</strong> 读写和操作数据库、创建实用的命令行工具辅助前端开发、etc…</p> <p>总之：<strong>Node.js 是大前端时代的“大宝剑”，有了 Node.js 这个超级 buff 的加持，前端程序员的行业竞争力会越来越强！</strong></p> <h2 id="_4-node-js-怎么学"><a href="#_4-node-js-怎么学" class="header-anchor">#</a> <strong>4.Node.js 怎么学</strong></h2> <p>浏览器中的 JavaScript 学习路径：</p> <p>JavaScript 基础语法 + 浏览器内置 API（DOM + BOM） + 第三方库（jQuery、art-template 等）</p> <p>Node.js 的学习路径：</p> <p>JavaScript 基础语法 + <strong>Node.js 内置 API 模块（fs、path、http 等）</strong>+ <strong>第三方 API 模块（express、mysql 等）</strong></p> <h2 id="_5-node-js-环境的安装"><a href="#_5-node-js-环境的安装" class="header-anchor">#</a> 5. <strong>Node.js 环境的安装</strong></h2> <p>如果希望通过 Node.js 来运行 Javascript 代码，则必须在计算机上安装 Node.js 环境才行。</p> <p>安装包可以从 Node.js 的官网首页直接下载，进入到 Node.js 的官网首页（<strong>https://nodejs.org/en/</strong>），点击</p> <p>绿色的按钮，下载所需的版本后，双击直接安装即可。</p> <p><img src="/zz-web/assets/img/image-20201116185511949.7068b1ac.png" alt="image-20201116185511949"></p> <h2 id="_6-node-js-环境的安装"><a href="#_6-node-js-环境的安装" class="header-anchor">#</a> 6. <strong>Node.js 环境的安装</strong></h2> <p><strong>1 .区分</strong> <strong>LTS</strong> <strong>版本和</strong> <strong>Current</strong> <strong>版本的不同</strong></p> <p><strong>① LTS 为长期稳定版，对于追求稳定性的企业级项目来说，推荐安装 LTS 版本的 Node.js。</strong></p> <p><strong>② Current 为新特性尝鲜版，对热衷于尝试新特性的用户来说，推荐安装 Current 版本的 Node.js。但是，Current 版本中可能存在隐藏的 Bug 或安全性漏洞，因此不推荐在企业级项目中使用 Current 版本的 Node.js。</strong></p> <h2 id="_7-查看已安装的-node-js-的版本号"><a href="#_7-查看已安装的-node-js-的版本号" class="header-anchor">#</a> 7. <strong>查看已安装的 Node.js 的版本号</strong></h2> <p>打开终端，在终端输入命令 <strong>node –v</strong> 后，按下回车键，即可查看已安装的 Node.js 的版本号。</p> <p>Windows 系统快速打开终端的方式：</p> <p>使用快捷键（<strong>Windows 徽标键 + R</strong>）打开运行面板，输入 cmd 后直接回车，即可打开终端。</p> <p><img src="/zz-web/assets/img/image-20201116185731339.5fb4afe5.png" alt="image-20201116185731339"></p> <h2 id="_8-什么是终端"><a href="#_8-什么是终端" class="header-anchor">#</a> 8. <strong>什么是终端</strong></h2> <p>终端（英文：Terminal）是专门为开发人员设计的，用于实现人机交互的一种方式。</p> <p>作为一名合格的程序员，我们有必要识记一些<strong>常用的终端命令</strong>，来辅助我们更好的操作与使用计算机。</p> <h2 id="_9-在-node-js-环境中执行-javascript-代码"><a href="#_9-在-node-js-环境中执行-javascript-代码" class="header-anchor">#</a> 9. <strong>在 Node.js 环境中执行 JavaScript 代码</strong></h2> <p><strong>1. 终端中的快捷键</strong></p> <p>在 Windows 的 powershell 或 cmd 终端中，我们可以通过如下快捷键，来提高终端的操作效率：</p> <p>① 使用 <strong>↑</strong> 键，可以快速定位到上一次执行的命令</p> <p>② 使用 <strong>tab</strong> 键，能够快速补全路径</p> <p>③ 使用 <strong>esc</strong> 键，能够快速清空当前已输入的命令</p> <p>④ 输入 <strong>cls</strong> 命令，可以清空终端</p> <h1 id="fs-文件系统模块"><a href="#fs-文件系统模块" class="header-anchor">#</a> <strong>fs 文件系统模块</strong></h1> <h2 id="_1-什么是-fs-文件系统模块"><a href="#_1-什么是-fs-文件系统模块" class="header-anchor">#</a> 1.<strong>什么是 fs 文件系统模块</strong></h2> <p>fs 模块是 Node.js 官方提供的、用来操作文件的模块。它提供了一系列的方法和属性，用来满足用户对文件的操作需求。</p> <p>例如：</p> <p>⚫ <strong>fs.readFile()</strong> 方法，用来读取指定文件中的内容</p> <p>⚫ <strong>fs.writeFile()</strong> 方法，用来向指定的文件中写入内容</p> <p>如果要在 JavaScript 代码中，使用 fs 模块来操作文件，则需要使用如下的方式先导入它：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_2-读取指定文件中的内容"><a href="#_2-读取指定文件中的内容" class="header-anchor">#</a> 2.<strong>读取指定文件中的内容</strong></h2> <p><strong>1. fs.readFile() 的语法格式</strong></p> <p>使用 fs.readFile() 方法，可以读取指定文件中的内容，语法格式如下：</p> <p><img src="/zz-web/assets/img/image-20201116190428341.ebfc0e53.png" alt="image-20201116190428341"></p> <p>参数解读：</p> <p>⚫ 参数 1：<strong>必选</strong>参数，字符串，表示文件的路径。</p> <p>⚫ 参数 2：可选参数，表示以什么<strong>编码格式</strong>来读取文件。</p> <p>⚫ 参数 3：<strong>必选</strong>参数，文件读取完成后，通过回调函数拿到读取的结果。</p> <p><strong>2. fs.readFile() 的示例代码</strong></p> <p>以 utf8 的编码格式，读取指定文件的内容，并打印 err 和 dataStr 的值：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&quot;./files/11.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;utf8&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> dataStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;-----&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dataStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>3. 判断文件是否读取成功</strong></p> <p>可以判断 err 对象是否为 null，从而知晓文件读取的结果：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&quot;./files/11.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;utf8&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> dataStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;读取文件失败！&quot;</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;读取文件成功！&quot;</span> <span class="token operator">+</span> dataStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_3-向指定的文件中写入内容"><a href="#_3-向指定的文件中写入内容" class="header-anchor">#</a> 3.向指定的文件中写入内容</h2> <p><strong>1. fs.writeFile() 的语法格式</strong></p> <p>使用 fs.writeFile() 方法，可以向指定的文件中写入内容，语法格式如下：</p> <p><img src="/zz-web/assets/img/image-20201116191112909.f9cf997a.png" alt="image-20201116191112909"></p> <p>参数解读：</p> <p>⚫ 参数 1：<strong>必选</strong>参数，需要指定一个文件路径的字符串，表示文件的存放路径。</p> <p>⚫ 参数 2：必选参数，表示要<strong>写入的内容</strong>。</p> <p>⚫ 参数 3：可选参数，表示以什么格式写入文件内容，<strong>默认值是 utf8</strong>。</p> <p>⚫ 参数 4：<strong>必选</strong>参数，文件写入完成后的<strong>回调函数</strong>。</p> <p><strong>2. fs.writeFile() 的示例代码</strong></p> <p>向指定的文件路径中，写入文件内容：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">&quot;./files/2.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hello Node.js&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>3. 判断文件是否写入成功</strong></p> <p>可以判断 err 对象是否为 null，从而知晓文件写入的结果：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">&quot;./files/2.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hello Node.js&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;文件写入失败！&quot;</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;文件写入成功！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_4-练习-考试成绩整理"><a href="#_4-练习-考试成绩整理" class="header-anchor">#</a> 4.<strong>练习 - 考试成绩整理</strong></h2> <p>使用 fs 文件系统模块，将素材目录下成绩.txt 文件中的考试数据，整理到成绩-ok.txt 文件中。</p> <p>整理前，成绩.txt 文件中的数据格式如下</p> <p><img src="/zz-web/assets/img/image-20201116191722482.32244e7c.png" alt="image-20201116191722482"></p> <p>整理完成之后，希望得到的成绩-ok.txt 文件中的数据格式如下：</p> <p><img src="/zz-web/assets/img/image-20201116191738561.73161e0d.png" alt="image-20201116191738561"></p> <p><strong>核心实现步骤</strong></p> <p><strong>① 导入需要的 fs 文件系统模块</strong></p> <p><strong>② 使用 fs.readFile() 方法，读取素材目录下的 成绩.txt 文件</strong></p> <p><strong>③ 判断文件是否读取失败</strong></p> <p><strong>④ 文件读取成功后，处理成绩数据</strong></p> <p><strong>⑤ 将处理完成的成绩数据，调用 fs.writeFile() 方法，写入到新文件 成绩-ok.txt 中</strong></p> <p>代码如下:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 1. 导入 fs 模块</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 2. 调用 fs.readFile() 读取文件的内容</span>
fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&quot;../素材/成绩.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;utf8&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> dataStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 3. 判断是否读取成功</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;读取文件失败！&quot;</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// console.log('读取文件成功！' + dataStr)</span>

  <span class="token comment">// 4.1 先把成绩的数据，按照空格进行分割</span>
  <span class="token keyword">const</span> arrOld <span class="token operator">=</span> dataStr<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 4.2 循环分割后的数组，对每一项数据，进行字符串的替换操作</span>
  <span class="token keyword">const</span> arrNew <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  arrOld<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    arrNew<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;=&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 4.3 把新数组中的每一项，进行合并，得到一个新的字符串</span>
  <span class="token keyword">const</span> newStr <span class="token operator">=</span> arrNew<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;\r\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 5. 调用 fs.writeFile() 方法，把处理完毕的成绩，写入到新文件中</span>
  fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">&quot;./files/成绩-ok.txt&quot;</span><span class="token punctuation">,</span> newStr<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;写入文件失败！&quot;</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;成绩写入成功！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h2 id="_5-fs-模块-路径动态拼接的问题"><a href="#_5-fs-模块-路径动态拼接的问题" class="header-anchor">#</a> 5.<strong>fs 模块 - 路径动态拼接的问题</strong></h2> <p>在使用 fs 模块操作文件时，如果提供的操作路径是以 ./ 或 ../ 开头的相对路径时，很容易出现路径动态拼接错误的问题。</p> <p><strong>原因</strong>：代码在运行的时候，会以执行 node 命令时所处的目录，动态拼接出被操作文件的完整路径。</p> <p><strong>解决方案</strong>：在使用 fs 模块操作文件时，直接提供完整的路径，不要提供 ./ 或 ../ 开头的相对路径，从而防止路径动态拼接的问题。</p> <p><img src="/zz-web/assets/img/image-20201116192808447.2184e64d.png" alt="image-20201116192808447"></p> <h1 id="path-路径模块"><a href="#path-路径模块" class="header-anchor">#</a> <strong>path 路径模块</strong></h1> <h2 id="_1-什么是-path-路径模块"><a href="#_1-什么是-path-路径模块" class="header-anchor">#</a> 1. <strong>什么是 path 路径模块</strong></h2> <p>path 模块是 Node.js 官方提供的、用来处理路径的模块。它提供了一系列的方法和属性，用来满足用户对路径的处理</p> <p>需求。</p> <p>例如：</p> <p>⚫ path.join() 方法，用来将多个路径片段拼接成一个完整的路径字符串</p> <p>⚫ path.basename() 方法，用来从路径字符串中，将文件名解析出来</p> <p>如果要在 JavaScript 代码中，使用 path 模块来处理路径，则需要使用如下的方式先导入它：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_2-路径拼接"><a href="#_2-路径拼接" class="header-anchor">#</a> 2. <strong>路径拼接</strong></h2> <p><strong>1.</strong> <strong>path.join()</strong> <strong>的语法格式</strong></p> <p>使用 path.join()</p> <p><img src="/zz-web/assets/img/image-20201116192943138.8c89f5c0.png" alt="image-20201116192943138"></p> <p>参数解读：</p> <p>⚫ ...paths <code>&lt;string&gt;</code>路径片段的序列</p> <p>⚫ 返回值: <code>&lt;string&gt;</code></p> <p><strong>2.</strong> <strong>path.join()</strong> <strong>的代码示例</strong></p> <p>使用 path.join() 方法，可以把多个路径片段拼接为完整的路径字符串：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> pathStr <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;/a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/b/c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;../../&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;./d&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;e&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pathStr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \a\b\d\e</span>

<span class="token keyword">const</span> pathStr2 <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">&quot;/files/1.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pathStr2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>注意：<strong>今后凡是涉及到路径拼接的操作，都要使用 path.join() 方法进行处理</strong>。不要直接使用 + 进行字符串的拼接。</p> <h2 id="_3-获取路径中的文件名"><a href="#_3-获取路径中的文件名" class="header-anchor">#</a> 3.<strong>获取路径中的文件名</strong></h2> <p><strong>1. path.basename() 的语法格式</strong></p> <p>使用 path.basename() 方法，可以获取路径中的最后一部分，经常通过这个方法获取路径中的文件名，语法格式如下：</p> <p><img src="/zz-web/assets/img/image-20201116193203263.acf2208b.png" alt="image-20201116193203263"></p> <p>参数解读：</p> <p>⚫ path <code>&lt;string&gt;</code> 必选参数，表示一个路径的字符串</p> <p>⚫ ext <code>&lt;string&gt;</code> 可选参数，表示文件扩展名</p> <p>⚫ 返回: <code>&lt;string&gt;</code> 表示路径中的最后一部分</p> <p><strong>2. path.basename() 的代码示例</strong></p> <p>使用 path.basename() 方法，可以从一个文件路径中，获取到文件的名称部分：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 定义文件的存放路径</span>
<span class="token keyword">const</span> fpath <span class="token operator">=</span> <span class="token string">&quot;/a/b/c/index.html&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> fullName <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span>fpath<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fullName<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> nameWithoutExt <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span>fpath<span class="token punctuation">,</span> <span class="token string">&quot;.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>nameWithoutExt<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_4-获取路径中的文件扩展名"><a href="#_4-获取路径中的文件扩展名" class="header-anchor">#</a> 4. <strong>获取路径中的文件扩展名</strong></h2> <p><strong>1. path.extname() 的语法格式</strong></p> <p>使用 path.extname() 方法，可以获取路径中的扩展名部分，语法格式如下:</p> <p><img src="/zz-web/assets/img/image-20201117181104324.b754c1cc.png" alt="image-20201117181104324"></p> <p>参数解读：</p> <p>⚫ path <code>&lt;string&gt;</code>必选参数，表示一个路径的字符串</p> <p>⚫ 返回: <code>&lt;string&gt;</code> 返回得到的扩展名字符串</p> <p><strong>2. path.extname() 的代码示例</strong></p> <p>使用 path.extname() 方法，可以获取路径中的扩展名部分：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 这是文件的存放路径</span>
<span class="token keyword">const</span> fpath <span class="token operator">=</span> <span class="token string">&quot;/a/b/c/index.html&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> fext <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span>fpath<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fext<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h1 id="综合案例-时钟案例"><a href="#综合案例-时钟案例" class="header-anchor">#</a> <strong>综合案例 - 时钟案例</strong></h1> <h2 id="_1-案例要实现的功能"><a href="#_1-案例要实现的功能" class="header-anchor">#</a> <strong>1. 案例要实现的功能</strong></h2> <p>将素材目录下的 index.html 页面，</p> <p>拆分成三个文件，分别是：</p> <p>⚫ index.css</p> <p>⚫ index.js</p> <p>⚫ index.html</p> <p>并且将拆分出来的 3 个文件，存放到 clock 目录中</p> <p><img src="/zz-web/assets/img/image-20201117181312904.586f94e8.png" alt="image-20201117181312904"></p> <h2 id="_2-案例的实现步骤"><a href="#_2-案例的实现步骤" class="header-anchor">#</a> 2.<strong>案例的实现步骤</strong></h2> <p><strong>① 创建两个正则表达式，分别用来匹配 <code>&lt;style&gt;</code> 和 <code>&lt;script&gt;</code> 标签</strong></p> <p><strong>② 使用 fs 模块，读取需要被处理的 HTML 文件</strong></p> <p><strong>③ 自定义 resolveCSS 方法，来写入 index.css 样式文件</strong></p> <p><strong>④ 自定义 resolveJS 方法，来写入 index.js 脚本文件</strong></p> <p><strong>⑤ 自定义 resolveHTML 方法，来写入 index.html 文件</strong></p> <h2 id="_3-步骤-1-导入需要的模块并创建正则表达式"><a href="#_3-步骤-1-导入需要的模块并创建正则表达式" class="header-anchor">#</a> 3. 步骤 1 - 导入需要的模块并创建正则表达式</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 1.1 导入 fs 模块</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 1.2 导入 path 模块</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 1.3 定义正则表达式，分别匹配 &lt;style&gt;&lt;/style&gt; 和 &lt;script&gt;&lt;/script&gt; 标签</span>
<span class="token keyword">const</span> regStyle <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;style&gt;[\s\S]*&lt;\/style&gt;</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> regScript <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;script&gt;[\s\S]*&lt;\/script&gt;</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_4-步骤-2-使用-fs-模块读取需要被处理的-html-文件"><a href="#_4-步骤-2-使用-fs-模块读取需要被处理的-html-文件" class="header-anchor">#</a> <strong>4. 步骤 2 - 使用 fs 模块读取需要被处理的 html 文件</strong></h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 2.1 调用 fs.readFile() 方法读取文件</span>
fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>
  path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;../素材/index.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string">&quot;utf8&quot;</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> dataStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 2.2 读取 HTML 文件失败</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;读取HTML文件失败！&quot;</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 2.3 读取文件成功后，调用对应的三个方法，分别拆解出 css, js, html 文件</span>
    <span class="token function">resolveCSS</span><span class="token punctuation">(</span>dataStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">resolveJS</span><span class="token punctuation">(</span>dataStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">resolveHTML</span><span class="token punctuation">(</span>dataStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_5-步骤-3-自定义-resolvecss-方法"><a href="#_5-步骤-3-自定义-resolvecss-方法" class="header-anchor">#</a> 5.<strong>步骤 3 – 自定义 resolveCSS 方法</strong></h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 3.1 定义处理 css 样式的方法</span>
<span class="token keyword">function</span> <span class="token function">resolveCSS</span><span class="token punctuation">(</span><span class="token parameter">htmlStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 3.2 使用正则提取需要的内容</span>
  <span class="token keyword">const</span> r1 <span class="token operator">=</span> regStyle<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>htmlStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 3.3 将提取出来的样式字符串，进行字符串的 replace 替换操作</span>
  <span class="token keyword">const</span> newCSS <span class="token operator">=</span> r1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;style&gt;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/style&gt;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 3.4 调用 fs.writeFile() 方法，将提取的样式，写入到 clock 目录中 index.css 的文件里面</span>
  fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>
    path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./clock/index.css&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    newCSS<span class="token punctuation">,</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;写入 CSS 样式失败！&quot;</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;写入样式文件成功！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="_6-步骤-4-自定义-resolvejs-方法"><a href="#_6-步骤-4-自定义-resolvejs-方法" class="header-anchor">#</a> 6. <strong>步骤 4 – 自定义 resolveJS 方法</strong></h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 4.1 定义处理 js 脚本的方法</span>
<span class="token keyword">function</span> <span class="token function">resolveJS</span><span class="token punctuation">(</span><span class="token parameter">htmlStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 4.2 通过正则，提取对应的 &lt;script&gt;&lt;/script&gt; 标签内容</span>
  <span class="token keyword">const</span> r2 <span class="token operator">=</span> regScript<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>htmlStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 4.3 将提取出来的内容，做进一步的处理</span>
  <span class="token keyword">const</span> newJS <span class="token operator">=</span> r2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;script&gt;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/script&gt;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 4.4 将处理的结果，写入到 clock 目录中的 index.js 文件里面</span>
  fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./clock/index.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> newJS<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;写入 JavaScript 脚本失败！&quot;</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;写入 JS 脚本成功！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="_7-步骤-5-自定义-resolvehtml-方法"><a href="#_7-步骤-5-自定义-resolvehtml-方法" class="header-anchor">#</a> 7. <strong>步骤 5 – 自定义 resolveHTML 方法</strong></h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 5.1 定义处理 HTML 结构的方法</span>
<span class="token keyword">function</span> <span class="token function">resolveHTML</span><span class="token punctuation">(</span><span class="token parameter">htmlStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 5.2 将字符串调用 replace 方法，把内嵌的 style 和 script 标签，替换为外联的 link 和 script 标签</span>
  <span class="token keyword">const</span> newHTML <span class="token operator">=</span> htmlStr
    <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>regStyle<span class="token punctuation">,</span> <span class="token string">'&lt;link rel=&quot;stylesheet&quot; href=&quot;./index.css&quot; /&gt;'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>regScript<span class="token punctuation">,</span> <span class="token string">'&lt;script src=&quot;./index.js&quot;&gt;&lt;/script&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 5.3 写入 index.html 这个文件</span>
  fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>
    path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./clock/index.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    newHTML<span class="token punctuation">,</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;写入 HTML 文件失败！&quot;</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;写入 HTML 页面成功！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="_8-案例的两个注意点"><a href="#_8-案例的两个注意点" class="header-anchor">#</a> 8.<strong>案例的两个注意点</strong></h2> <p><strong>① fs.writeFile() 方法只能用来创建文件，不能用来创建路径</strong></p> <p><strong>② 重复调用 fs.writeFile() 写入同一个文件，新写入的内容会覆盖之前的旧内容</strong></p> <h2 id="_9-完整实例代码"><a href="#_9-完整实例代码" class="header-anchor">#</a> 9.完整实例代码</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 1.1 导入 fs 模块</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 1.2 导入 path 模块</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 1.3 定义正则表达式，分别匹配 &lt;style&gt;&lt;/style&gt; 和 &lt;script&gt;&lt;/script&gt; 标签</span>
<span class="token keyword">const</span> regStyle <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;style&gt;[\s\S]*&lt;\/style&gt;</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> regScript <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;script&gt;[\s\S]*&lt;\/script&gt;</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>

<span class="token comment">// 2.1 调用 fs.readFile() 方法读取文件</span>
fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>
  path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;../素材/index.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string">&quot;utf8&quot;</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> dataStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 2.2 读取 HTML 文件失败</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;读取HTML文件失败！&quot;</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 2.3 读取文件成功后，调用对应的三个方法，分别拆解出 css, js, html 文件</span>
    <span class="token function">resolveCSS</span><span class="token punctuation">(</span>dataStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">resolveJS</span><span class="token punctuation">(</span>dataStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">resolveHTML</span><span class="token punctuation">(</span>dataStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 3.1 定义处理 css 样式的方法</span>
<span class="token keyword">function</span> <span class="token function">resolveCSS</span><span class="token punctuation">(</span><span class="token parameter">htmlStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 3.2 使用正则提取需要的内容</span>
  <span class="token keyword">const</span> r1 <span class="token operator">=</span> regStyle<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>htmlStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 3.3 将提取出来的样式字符串，进行字符串的 replace 替换操作</span>
  <span class="token keyword">const</span> newCSS <span class="token operator">=</span> r1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;style&gt;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/style&gt;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 3.4 调用 fs.writeFile() 方法，将提取的样式，写入到 clock 目录中 index.css 的文件里面</span>
  fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>
    path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./clock/index.css&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    newCSS<span class="token punctuation">,</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;写入 CSS 样式失败！&quot;</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;写入样式文件成功！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 4.1 定义处理 js 脚本的方法</span>
<span class="token keyword">function</span> <span class="token function">resolveJS</span><span class="token punctuation">(</span><span class="token parameter">htmlStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 4.2 通过正则，提取对应的 &lt;script&gt;&lt;/script&gt; 标签内容</span>
  <span class="token keyword">const</span> r2 <span class="token operator">=</span> regScript<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>htmlStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 4.3 将提取出来的内容，做进一步的处理</span>
  <span class="token keyword">const</span> newJS <span class="token operator">=</span> r2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;script&gt;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/script&gt;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 4.4 将处理的结果，写入到 clock 目录中的 index.js 文件里面</span>
  fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./clock/index.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> newJS<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;写入 JavaScript 脚本失败！&quot;</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;写入 JS 脚本成功！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 5.1 定义处理 HTML 结构的方法</span>
<span class="token keyword">function</span> <span class="token function">resolveHTML</span><span class="token punctuation">(</span><span class="token parameter">htmlStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 5.2 将字符串调用 replace 方法，把内嵌的 style 和 script 标签，替换为外联的 link 和 script 标签</span>
  <span class="token keyword">const</span> newHTML <span class="token operator">=</span> htmlStr
    <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>regStyle<span class="token punctuation">,</span> <span class="token string">'&lt;link rel=&quot;stylesheet&quot; href=&quot;./index.css&quot; /&gt;'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>regScript<span class="token punctuation">,</span> <span class="token string">'&lt;script src=&quot;./index.js&quot;&gt;&lt;/script&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 5.3 写入 index.html 这个文件</span>
  fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>
    path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./clock/index.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    newHTML<span class="token punctuation">,</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;写入 HTML 文件失败！&quot;</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;写入 HTML 页面成功！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/zz-web/study/NodeJs/day02/02.html">
        NodeJs - day02
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/zz-web/assets/js/app.083f945b.js" defer></script><script src="/zz-web/assets/js/2.f2240049.js" defer></script><script src="/zz-web/assets/js/29.872a74a7.js" defer></script>
  </body>
</html>
